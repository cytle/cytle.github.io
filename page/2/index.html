<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">















  <link rel="alternate" href="/atom.xml" title="xsp">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.6.0" />



<link rel="canonical" href="https://cytle.github.io/page/2/"/>


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.6.0" />






  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>





  <script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script>
  <script id="leancloud">
    AV.init({
      appId: "XX5UNu0LFrK6VkLgVS7GygfL-gzGzoHsz",
      appKey: "pBlnYAs9URL4nuKQqCu6q4Jp"
    });
  </script>





    <title> xsp </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">xsp</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            é¦–é¡µ
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            å½’æ¡£
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            æ ‡ç­¾
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">xsp</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              é¦–é¡µ
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              å½’æ¡£
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              æ ‡ç­¾
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  <section id="posts" class="posts">
    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/10/19/ngrok-ä½¿ç”¨/">ngrok-ä½¿ç”¨</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-10-19
        </span>
        
        
        <div class="post-visits"
             data-url="/2016/10/19/ngrok-ä½¿ç”¨/"
             data-title="ngrok-ä½¿ç”¨">
            é˜…è¯»æ¬¡æ•°
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <h3 id="å®‰è£…ngrokå®¢æˆ·ç«¯"><a href="#å®‰è£…ngrokå®¢æˆ·ç«¯" class="headerlink" title="å®‰è£…ngrokå®¢æˆ·ç«¯"></a>å®‰è£…ngrokå®¢æˆ·ç«¯</h3><p>macä¸‹ä½¿ç”¨brewå®‰è£…(æ¥è‡ªcask)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> brew cask install ngork</span><br></pre></td></tr></table></figure>
<h3 id="å¾—åˆ°ä¸€ä¸ªæœåŠ¡å™¨"><a href="#å¾—åˆ°ä¸€ä¸ªæœåŠ¡å™¨" class="headerlink" title="å¾—åˆ°ä¸€ä¸ªæœåŠ¡å™¨"></a>å¾—åˆ°ä¸€ä¸ªæœåŠ¡å™¨</h3><h4 id="ç›´æ¥ä½¿ç”¨ngrok-com"><a href="#ç›´æ¥ä½¿ç”¨ngrok-com" class="headerlink" title="ç›´æ¥ä½¿ç”¨ngrok.com"></a>ç›´æ¥ä½¿ç”¨ngrok.com</h4><p>æ¯”è¾ƒå‘ï¼Œéœ€è¦ç¿»å¢™ã€‚ä»£ç†çš„åŸŸåä¹Ÿè¦ç¿»å¢™è®¿é—®ã€‚ã€‚</p>
<p><a href="https://dashboard.ngrok.com/user/signup" target="_blank" rel="noopener">ngrok.comæ³¨å†Œ</a></p>
<p>ngrok.comä¼šæä¾›ä¸€ä¸ª<code>authtoken</code></p>
<h4 id="è¿™é‡Œåº”è¯¥æœ‰é…ç½®è‡ªå·±çš„æœåŠ¡å™¨"><a href="#è¿™é‡Œåº”è¯¥æœ‰é…ç½®è‡ªå·±çš„æœåŠ¡å™¨" class="headerlink" title="è¿™é‡Œåº”è¯¥æœ‰é…ç½®è‡ªå·±çš„æœåŠ¡å™¨"></a>è¿™é‡Œåº”è¯¥æœ‰é…ç½®è‡ªå·±çš„æœåŠ¡å™¨</h4><p>æŒ–ä¸€ä¸ªå‘</p>
<h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><p>åœ¨å®¢æˆ·ç«¯ç»ˆç«¯æ‰§è¡Œ
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ngrok authtoken xxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><br></pre></td></tr></table></figure></p>
<p>ç»‘å®šæœ¬åœ°ç«¯å£ï¼Œå¹¶ä¸”å¯åŠ¨
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ngrok http 80</span><br></pre></td></tr></table></figure></p>
<p>è®¿é—®<a href="http://127.0.0.1:4040/å¯ä»¥çœ‹åˆ°ngrokè¿è¡ŒçŠ¶æ€" target="_blank" rel="noopener">http://127.0.0.1:4040/å¯ä»¥çœ‹åˆ°ngrokè¿è¡ŒçŠ¶æ€</a></p>
<p><img src="/uploads/ngrok-ä½¿ç”¨/ç•Œé¢æˆªå›¾.png" alt="ç•Œé¢æˆªå›¾"></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/10/17/Laravel-group-ä½¿ç”¨/">Laravel-group-ä½¿ç”¨</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-10-17
        </span>
        
        
        <div class="post-visits"
             data-url="/2016/10/17/Laravel-group-ä½¿ç”¨/"
             data-title="Laravel-group-ä½¿ç”¨">
            é˜…è¯»æ¬¡æ•°
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>groupæ¥å—è¿™å‡ ä¸ªå±æ€§ï¼Œnamespaceã€prefixã€whereã€asã€‚åŒæ—¶groupå¯ä»¥åµŒå¥—ä½¿ç”¨ã€‚</p>
<p>ä»¥ä¸‹ä¸¤æ®µä»£ç åŠŸèƒ½ç›¸åŒ</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    Route::group([<span class="string">'prefix'</span> =&gt; <span class="string">'users'</span>, <span class="string">'namespace'</span> =&gt; <span class="string">'User'</span>], <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Route::post(<span class="string">''</span>, [</span><br><span class="line">            <span class="string">'as'</span> =&gt; <span class="string">'æ–°å¢ç”¨æˆ·'</span>,</span><br><span class="line">            <span class="string">'uses'</span> =&gt; <span class="string">'UserController@store'</span></span><br><span class="line">            ]);</span><br><span class="line"></span><br><span class="line">        Route::get(<span class="string">'&#123;id&#125;'</span>, [</span><br><span class="line">            <span class="string">'as'</span> =&gt; <span class="string">'ç”¨æˆ·è¯¦æƒ…'</span>,</span><br><span class="line">            <span class="string">'uses'</span> =&gt; <span class="string">'UserController@show'</span></span><br><span class="line">            ])-&gt;where([<span class="string">'id'</span> =&gt; <span class="string">'\\d+'</span>]);</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    Route::post(<span class="string">'users'</span>, [</span><br><span class="line">        <span class="string">'as'</span> =&gt; <span class="string">'æ–°å¢ç”¨æˆ·'</span>,</span><br><span class="line">        <span class="string">'uses'</span> =&gt; <span class="string">'User\UserController@store'</span></span><br><span class="line">        ]);</span><br><span class="line"></span><br><span class="line">    Route::get(<span class="string">'users\&#123;id&#125;'</span>, [</span><br><span class="line">        <span class="string">'as'</span> =&gt; <span class="string">'ç”¨æˆ·è¯¦æƒ…'</span>,</span><br><span class="line">        <span class="string">'uses'</span> =&gt; <span class="string">'User\UserController@show'</span></span><br><span class="line">        ])-&gt;where([<span class="string">'id'</span> =&gt; <span class="string">'\\d+'</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/10/13/HessianJavaä»U+10000åˆ°U+10FFFFçš„ç ä½ä¼ è¾“é”™è¯¯/">HessianJavaä»U+10000åˆ°U+10FFFFçš„ç ä½ä¼ è¾“é”™è¯¯</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-10-13
        </span>
        
        
        <div class="post-visits"
             data-url="/2016/10/13/HessianJavaä»U+10000åˆ°U+10FFFFçš„ç ä½ä¼ è¾“é”™è¯¯/"
             data-title="HessianJavaä»U+10000åˆ°U+10FFFFçš„ç ä½ä¼ è¾“é”™è¯¯">
            é˜…è¯»æ¬¡æ•°
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <blockquote>
<p>è¿™æ®µæ—¶é—´ä½¿ç”¨Hessianä¼ é€’æ•°æ®ï¼Œå‘ç°æœ‰å¾ˆå¤šå¤§å‘ã€‚å¹´ä¹…å¤±ä¿®çš„Hessiançš„PHPå®ç°åº“åœ¨64ä½ä¸‹ä¼ é€’æ•°å­—é”™è¯¯è¿è¿ã€‚
ä¹‹å‰è¿˜å‘ç°äº†ä¼ é€’emojiè¡¨æƒ…å‡ºç°äº†é—®é¢˜ï¼Œè¿™å‡ å¤©ç»ˆäºè¿½è¸ªåˆ°é—®é¢˜æ‰€åœ¨ã€‚</p>
</blockquote>
<h2 id="ç°è±¡è¯´æ˜"><a href="#ç°è±¡è¯´æ˜" class="headerlink" title="ç°è±¡è¯´æ˜"></a>ç°è±¡è¯´æ˜</h2><p>ä½¿ç”¨PHPä½œä¸ºclientè°ƒç”¨Javaå¼€å‘çš„Serverï¼Œè¿”å›çš„å­—ç¬¦ä¸²ä¸­å«æœ‰ä¸èƒ½è¢«jsonç¼–ç çš„å­—ç¬¦ï¼Œè¡¨ç°ä¸ºå®é™…çš„å­—ç¬¦
ä¸²ä¸ºã€Œä½ å¥½ğŸŒï¼Œabcï¼ã€ï¼Œç»è¿‡HessianJavaå’ŒHessianPHPåï¼Œç»“æœè¾“å‡ºä¸ºã€Œä½ å¥½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¼Œabcï¼ã€ï¼Œ
é™¤äº†è¿™ä¸ªã€ŒğŸŒã€emojiè¡¨æƒ…å¤–å…¶å®ƒçš„å­—ç¬¦éƒ½èƒ½æ­£ç¡®è¾“å‡ºã€‚æ¯”è¾ƒå¥‡æ€ªçš„æ˜¯Javaåˆ°Javaæ²¡æœ‰é—®é¢˜ã€‚</p>
<p>æˆ‘å…ˆåœ¨æ•°æ®åº“ä¸­å†™äº†ä¸€å †emojiè¡¨æƒ…ï¼Œç„¶ååœ¨hessian2parseè§£æå­—ç¬¦ä¸²çš„åœ°æ–¹æ‹¦æˆªå…¶æ”¶åˆ°å†…å®¹ï¼Œæ‰“å°å®ƒä»¬çš„å­—èŠ‚</p>
<table>
<thead>
<tr>
<th style="text-align:left">è¡¨æƒ…</th>
<th style="text-align:left">Unicode</th>
<th style="text-align:left">UTF-16</th>
<th style="text-align:left">UTF-8 bytes</th>
<th style="text-align:left">æœåŠ¡å™¨æ”¶åˆ°bytes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ğŸŒ</td>
<td style="text-align:left">1 F3 0D</td>
<td style="text-align:left">D8 3C DF 0D</td>
<td style="text-align:left">F0 9F 8C 8D</td>
<td style="text-align:left">ED A0 BC ED BC 8D</td>
</tr>
<tr>
<td style="text-align:left">ğŸ</td>
<td style="text-align:left">1 F4 01</td>
<td style="text-align:left">D8 3D DC 01</td>
<td style="text-align:left">F0 9F 90 81</td>
<td style="text-align:left">ED A0 BD ED B0 81</td>
</tr>
</tbody>
</table>
<p>è¿™é‡Œé€‰æ‹©éƒ¨åˆ†æ‰“å°å‡ºæ¥</p>
<p>Hessianåè®®åœ¨ä¼ é€’æ•°æ®æ—¶ç”¨çš„å­—ç¬¦ç¼–ç æ˜¯UTF-8ï¼Œå¯å˜é•¿åº¦ï¼Œæœ‰æ•ˆçš„å‹ç¼©äº†æ•°æ®é•¿åº¦ï¼Œä»ä¸Šé¢çš„è¡¨æ ¼å¯ä»¥å‘ç°åº”
è¯¥æ˜¯4å­—èŠ‚çš„UTF-8ï¼Œç»“æœå˜æˆ6å­—èŠ‚ï¼Œè€ŒHessianPHPè¿™è¾¹å¯¹utf8å­—ç¬¦ä¸²å‡ ä¹æ²¡æœ‰ä»€ä¹ˆå¤„ç†ï¼Œè¿™ä¹ˆæï¼Œå­—ç¬¦ä¸²è‚¯
å®šæ˜¯ä¹±ç çš„ã€‚</p>
<h2 id="æ‰¾é—®é¢˜"><a href="#æ‰¾é—®é¢˜" class="headerlink" title="æ‰¾é—®é¢˜"></a>æ‰¾é—®é¢˜</h2><p><code>HessianPHP</code>è¿™è¾¹å¯¹å­—ç¬¦å‡ ä¹çš„0å¤„ç†ï¼Œå½“ç„¶å¦‚æœå½“å‰ç¯å¢ƒæ˜¯åˆ«çš„å­—ç¬¦é›†ï¼Œä¼šå°†å­—ç¬¦ä¸²è½¬ç ã€‚ä½†å‘ç°
<code>HessianPHP</code>è¯»å­—ç¬¦ä¸²æ—¶ï¼Œåªå¯¹1-3å­—èŠ‚çš„UTF-8å­—ç¬¦æœ‰è¯†åˆ«ï¼Œå¯¹4å­—èŠ‚çš„UTF-8æ²¡æœ‰å¤„ç†ã€‚å¦‚æœæŠŠPHPè¿™è¾¹åŒ
æ—¶ä½œä¸ºæœåŠ¡å’Œå®¢æˆ·ç«¯æµ‹è¯•æ—¶ï¼Œä¹Ÿå‡ºç°bugï¼Œé•¿åº¦è¯»å–ä¸å¯¹ã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="comment">// ä¿®æ”¹å</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">readUTF8Bytes</span><span class="params">($len)</span></span>&#123;</span><br><span class="line">        $string = <span class="keyword">$this</span>-&gt;read($len);</span><br><span class="line">        $pos = <span class="number">0</span>;</span><br><span class="line">        $pass = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>($pass &lt;= $len)&#123;</span><br><span class="line">            $charCode = ord($string[$pos]);</span><br><span class="line">            <span class="keyword">if</span>($charCode &lt; <span class="number">0x80</span>)&#123;</span><br><span class="line">                $pos++;</span><br><span class="line">            &#125; <span class="keyword">elseif</span>(($charCode &amp; <span class="number">0xe0</span>) == <span class="number">0xc0</span>)&#123;</span><br><span class="line">                $pos += <span class="number">2</span>;</span><br><span class="line">                $string .= <span class="keyword">$this</span>-&gt;read(<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">elseif</span> (($charCode &amp; <span class="number">0xf0</span>) == <span class="number">0xe0</span>) &#123;</span><br><span class="line">                $pos += <span class="number">3</span>;</span><br><span class="line">                $string .= <span class="keyword">$this</span>-&gt;read(<span class="number">2</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span></span><br><span class="line">            <span class="comment">// åœ¨æ­¤åŠ å…¥4å­—èŠ‚å­—ç¬¦è¯†åˆ«ï¼Œå‚è€ƒUTF-8ç¼–ç è§„åˆ™</span></span><br><span class="line">            <span class="keyword">if</span> (($charCode &amp; <span class="number">0xf8</span>) == <span class="number">0xf0</span>) &#123;</span><br><span class="line">                $pos += <span class="number">4</span>;</span><br><span class="line">                $string .= <span class="keyword">$this</span>-&gt;read(<span class="number">3</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            $pass++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(! HessianUtils::isInternalUTF8())&#123;</span><br><span class="line">            $string = utf8_decode($string);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> $string;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¹ˆä¿®æ”¹åï¼Œphpä¹‹é—´çš„ä¼ é€’å°±æ²¡æœ‰é—®é¢˜äº†ã€‚è¯¦ç»†çš„UTF-8è¯´æ˜å‚è€ƒè¿™ï¼Œ
<a href="https://zh.wikipedia.org/wiki/UTF-8" target="_blank" rel="noopener">wiki:UTF-8</a></p>
<p>å†çœ‹Javaéƒ¨åˆ†å‰ï¼Œæœ‰ä¸€ä¸ªèƒŒæ™¯éœ€è¦çŸ¥é“ï¼Œä»1.5ç‰ˆå¼€å§‹ï¼ŒJavaå‚¨å­˜å­—ç¬¦ä½¿ç”¨<code>UTF-16</code>çš„æ–¹å¼ï¼Œ
æ¯ä¸ªcharé•¿åº¦ä¸º2Bytesã€‚å¯ä»¥å‚è€ƒ<a href="https://zh.wikipedia.org/wiki/UTF-16" target="_blank" rel="noopener">wiki:UTF-16</a>ï¼Œ
äº†è§£å…¶ç¼–ç æ–¹å¼ã€‚</p>
<blockquote>
<p>åœ¨Unicodeçš„é›¶å·å¹³é¢(BMP)ä¸­ï¼Œ<strong>UTF-16æ•°å€¼ç­‰ä»·äºå¯¹åº”çš„ç ä½</strong>ã€‚
Unicodeä¸­é™¤äº†BMPå¤–ï¼Œè¿˜æœ‰16ä¸ªè¾…åŠ©å¹³é¢ï¼Œç ä½ä¸ºU+10000åˆ°U+10FFFFã€‚
åœ¨UTF-16ä¸­è¢«ç¼–ç ä¸ºä¸€å¯¹16æ¯”ç‰¹é•¿çš„ç å…ƒï¼ˆå³32bit,4Bytesï¼‰ã€‚</p>
</blockquote>
<p>ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯åƒASCIIå­—ç¬¦ã€ä¸­æ–‡å­—ç¬¦ç­‰è¿™äº›åœ¨é›¶å·å¹³é¢ä¸­çš„å­—ç¬¦åœ¨Javaä¸­ç”±ä¸€ä¸ªcharï¼ˆ2Bytesï¼‰è¡¨ç¤ºï¼Œ
è€Œemojiè¿™æ ·åœ¨è¾…åŠ©å¹³é¢ä¸Šçš„å­—ç¬¦ç”±2ä¸ªcharï¼ˆ4Bytesï¼‰è¡¨ç¤ºï¼Œç†è®ºä¸Šèƒ½å®ç°æ‰€æœ‰çš„Unicodeå­—ç¬¦ç¼–ç äº†ã€‚</p>
<p>çœ‹çœ‹Javaè¿™è¾¹çš„å¤„ç†ï¼Œä»¥ä¸‹æ˜¯å†™å…¥éƒ¨åˆ†
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Prints a string to the stream, encoded as UTF-8</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> v the string to print.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printString</span><span class="params">(String v, <span class="keyword">int</span> strOffset, <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function">  <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> offset = _offset;</span><br><span class="line">  <span class="keyword">byte</span> []buffer = _buffer;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (SIZE &lt;= offset + <span class="number">16</span>) &#123;</span><br><span class="line">      _offset = offset;</span><br><span class="line">      flushBuffer();</span><br><span class="line">      offset = _offset;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> ch = v.charAt(i + strOffset);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ch &lt; <span class="number">0x80</span>)</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (ch);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (ch &lt; <span class="number">0x800</span>) &#123;</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0xc0</span> + ((ch &gt;&gt; <span class="number">6</span>) &amp; <span class="number">0x1f</span>));</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0x80</span> + (ch &amp; <span class="number">0x3f</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0xe0</span> + ((ch &gt;&gt; <span class="number">12</span>) &amp; <span class="number">0xf</span>));</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0x80</span> + ((ch &gt;&gt; <span class="number">6</span>) &amp; <span class="number">0x3f</span>));</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0x80</span> + (ch &amp; <span class="number">0x3f</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _offset = offset;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™éƒ¨åˆ†ä»£ç çš„ç›®çš„æ˜¯å°†å­—ç¬¦ä¸²ä»Javaä¸‹çš„å­—ç¬¦ä¸²ï¼ˆUTF-16ï¼‰è½¬ä¸ºUTF-8ç¼–ç ï¼Œä½†æ˜æ˜¾å®ƒåªèƒ½æ»¡è¶³åœ¨BMPä¸Šç ä½çš„è½¬ç ï¼Œä¸èƒ½æ”¯æŒè¾…åŠ©å¹³é¢ã€‚</p>
<p>å†æ¥çœ‹çœ‹è¯»çš„éƒ¨åˆ†
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Parses a single UTF8 character.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">parseUTF8Char</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> ch = _offset &lt; _length ? (_buffer[_offset++] &amp; <span class="number">0xff</span>) : read();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (ch &lt; <span class="number">0x80</span>)</span><br><span class="line">    <span class="keyword">return</span> ch;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> ((ch &amp; <span class="number">0xe0</span>) == <span class="number">0xc0</span>) &#123;</span><br><span class="line">    <span class="keyword">int</span> ch1 = read();</span><br><span class="line">    <span class="keyword">int</span> v = ((ch &amp; <span class="number">0x1f</span>) &lt;&lt; <span class="number">6</span>) + (ch1 &amp; <span class="number">0x3f</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> ((ch &amp; <span class="number">0xf0</span>) == <span class="number">0xe0</span>) &#123;</span><br><span class="line">    <span class="keyword">int</span> ch1 = read();</span><br><span class="line">    <span class="keyword">int</span> ch2 = read();</span><br><span class="line">    <span class="keyword">int</span> v = ((ch &amp; <span class="number">0x0f</span>) &lt;&lt; <span class="number">12</span>) + ((ch1 &amp; <span class="number">0x3f</span>) &lt;&lt; <span class="number">6</span>) + (ch2 &amp; <span class="number">0x3f</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">throw</span> error(<span class="string">"bad UTF-8 encoding at "</span> + codeName(ch));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Hessianæ˜¯æŒ‰UTF-8ç¼–ç ä¼ è¾“ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­åº”è¯¥æ˜¯å°†UTF-8è½¬ä¸ºUTF-16ï¼ŒæŒ‰ç…§UTF-8ç¼–ç æ–¹æ¡ˆè¿™é‡Œæ²¡æœ‰å¤„ç†4å­—èŠ‚çš„å­—ç¬¦ã€‚</p>
<p>ç”±äºå†™å…¥çš„å‡½æ•°åªæ˜¯å°†æ¯ä¸€ä¸ªå­—ç¬¦å•ç‹¬è½¬æˆUTF-8å­—ç¬¦ï¼Œå¯èƒ½ç”±ä¸¤ä¸ªcharè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦çš„ï¼Œä¹Ÿè¿™æ ·åˆ†åˆ«è¢«è½¬æˆä¸¤ä¸ª
UTF-8å­—ç¬¦ã€‚è¯»å–éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯è¿™ä¹ˆåˆ†åˆ«è¯»ï¼Œæœ€åè·å–åˆ°çš„charæ²¡æœ‰é—®é¢˜ï¼Œå¼„æ‹™æˆå·§ï¼ŒJava-Javaéƒ¨åˆ†å°±æ­£å¸¸ä¼ è¾“äº†ã€‚</p>
<h2 id="è§£å†³-æœªå®Œæˆæ–¹æ¡ˆ"><a href="#è§£å†³-æœªå®Œæˆæ–¹æ¡ˆ" class="headerlink" title="è§£å†³(æœªå®Œæˆæ–¹æ¡ˆ)"></a>è§£å†³(æœªå®Œæˆæ–¹æ¡ˆ)</h2><p>éœ€è¦javaé‚£è¾¹æŠŠè¯»å†™çš„æ–¹æ³•ä¿®æ”¹ä¸ºæ”¯æŒU+10000åˆ°U+10FFFFçš„ç ä½</p>
<p>å†™å…¥ä¿®å¤
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Prints a string to the stream, encoded as UTF-8</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> v the string to print.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printString</span><span class="params">(String v, <span class="keyword">int</span> strOffset, <span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function">  <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> offset = _offset;</span><br><span class="line">  <span class="keyword">byte</span> []buffer = _buffer;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (SIZE &lt;= offset + <span class="number">16</span>) &#123;</span><br><span class="line">      _offset = offset;</span><br><span class="line">      flushBuffer();</span><br><span class="line">      offset = _offset;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> ch = v.charAt(i + strOffset);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ch &lt; <span class="number">0x80</span>)</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (ch);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (ch &lt; <span class="number">0x800</span>) &#123;</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0xc0</span> + ((ch &gt;&gt; <span class="number">6</span>) &amp; <span class="number">0x1f</span>));</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0x80</span> + (ch &amp; <span class="number">0x3f</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// three Bytes, D800-DFFF do not allow the existence characters</span></span><br><span class="line">    <span class="keyword">if</span> (ch &lt; <span class="number">0xD800</span> || ch &gt;= <span class="number">0xE000</span>)) &#123;</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0xe0</span> + ((ch &gt;&gt; <span class="number">12</span>) &amp; <span class="number">0xf</span>));</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0x80</span> + ((ch &gt;&gt; <span class="number">6</span>) &amp; <span class="number">0x3f</span>));</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0x80</span> + (ch &amp; <span class="number">0x3f</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// 0xD800 - 0xE000 Unicode characters, Supplementary Planes, need four bytes</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// take the next char</span></span><br><span class="line">      i++;</span><br><span class="line">      <span class="keyword">char</span> ch1 = v.charAt(i + strOffset);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// get unicode code point from two chars</span></span><br><span class="line">      <span class="comment">// int code = ((ch - 0xD800) &lt;&lt; 10) + ch1 - 0xDC00 + 0x10000;</span></span><br><span class="line">      <span class="keyword">int</span> code = ((ch - <span class="number">0xD800</span>) &lt;&lt; <span class="number">10</span>) + ch1 + <span class="number">0x2400</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// unicode code to utf-8</span></span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0xf0</span> + ((code &gt;&gt; <span class="number">18</span>) &amp; <span class="number">0x7</span>));</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0x80</span> + ((code &gt;&gt; <span class="number">12</span>) &amp; <span class="number">0x3f</span>));</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0x80</span> + ((code &gt;&gt; <span class="number">6</span>) &amp; <span class="number">0x3f</span>));</span><br><span class="line">      buffer[offset++] = (<span class="keyword">byte</span>) (<span class="number">0x80</span> + (code &amp; <span class="number">0x3f</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// throw</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _offset = offset;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¯»å–ä¿®å¤ï¼Œæœ‰ç‚¹è›‹ç–¼ï¼Œåœ¨è¿™ä¸èƒ½ä¿®å¤ï¼Œé™¤äº†<code>parseUTF8Char</code>æ–¹æ³•ä¿®å¤ï¼Œè°ƒç”¨æ­¤æ–¹æ³•çš„ä¹Ÿéœ€è¦è·Ÿè¸ªä¿®å¤ï¼Œåœ¨æ­¤åªåšäº†å¯¹<code>parseUTF8Char</code>æ–¹æ³•çš„ä¿®å¤ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Parses a single UTF8 character.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">parseUTF8Char</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> ch = _offset &lt; _length ? (_buffer[_offset++] &amp; <span class="number">0xff</span>) : read();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (ch &lt; <span class="number">0x80</span>)</span><br><span class="line">    <span class="keyword">return</span> ch;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> ((ch &amp; <span class="number">0xe0</span>) == <span class="number">0xc0</span>) &#123;</span><br><span class="line">    <span class="keyword">int</span> ch1 = read();</span><br><span class="line">    <span class="keyword">int</span> v = ((ch &amp; <span class="number">0x1f</span>) &lt;&lt; <span class="number">6</span>) + (ch1 &amp; <span class="number">0x3f</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> ((ch &amp; <span class="number">0xf0</span>) == <span class="number">0xe0</span>) &#123;</span><br><span class="line">    <span class="keyword">int</span> ch1 = read();</span><br><span class="line">    <span class="keyword">int</span> ch2 = read();</span><br><span class="line">    <span class="keyword">int</span> v = ((ch &amp; <span class="number">0x0f</span>) &lt;&lt; <span class="number">12</span>) + ((ch1 &amp; <span class="number">0x3f</span>) &lt;&lt; <span class="number">6</span>) + (ch2 &amp; <span class="number">0x3f</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// parse the size of 4 bytes utf-8 characters</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> ((ch &amp; <span class="number">0xf8</span>) == <span class="number">0xf0</span>) &#123;</span><br><span class="line">    <span class="keyword">int</span> ch1 = read();</span><br><span class="line">    <span class="keyword">int</span> ch2 = read();</span><br><span class="line">    <span class="keyword">int</span> ch3 = read();</span><br><span class="line">    <span class="keyword">int</span> v = ((ch &amp; <span class="number">0x7</span>) &lt;&lt; <span class="number">18</span>) + ((ch1 &amp; <span class="number">0x3f</span>) &lt;&lt; <span class="number">12</span>) + ((ch2 &amp; <span class="number">0x3f</span>) &lt;&lt; <span class="number">6</span>) + (ch3 &amp; <span class="number">0x3f</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">throw</span> error(<span class="string">"bad UTF-8 encoding at "</span> + codeName(ch));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æœ€åçš„åŠæ³•"><a href="#æœ€åçš„åŠæ³•" class="headerlink" title="æœ€åçš„åŠæ³•"></a>æœ€åçš„åŠæ³•</h2><p>javaç«¯ä¸è¿›è¡Œä¿®æ”¹ï¼Œphpç«¯ä¿®å¤æ ¹æ®é—®é¢˜è§„åˆ™ä¿®æ”¹è§£æã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ä»Javaç«¯è¿”å›é”™è¯¯çš„å­—ç¬¦ï¼Œè¿›è¡Œè§£æ</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@author</span> ç‚’é¥­</span></span><br><span class="line"><span class="comment">   * 2016å¹´10æœˆ14æ—¥17:18:54</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">readUTF8FromBadStr</span><span class="params">($bytes)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (count($bytes) !== <span class="number">6</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'?'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      $bytes = array_map(<span class="function"><span class="keyword">function</span> <span class="params">($v)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ord($v);</span><br><span class="line">      &#125;, $bytes);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è·å–ç¬¬ä¸€ä¸ªutf-8ç </span></span><br><span class="line">      $v0 = (($bytes[<span class="number">0</span>] &amp; <span class="number">0xf</span>) &lt;&lt; <span class="number">12</span>) + (($bytes[<span class="number">1</span>] &amp; <span class="number">0x3f</span>) &lt;&lt; <span class="number">6</span>) + ($bytes[<span class="number">2</span>] &amp; <span class="number">0x3f</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è·å–ç¬¬äºŒä¸ªutf-8ç </span></span><br><span class="line">      $v1 = (($bytes[<span class="number">3</span>] &amp; <span class="number">0xf</span>) &lt;&lt; <span class="number">12</span>) + (($bytes[<span class="number">4</span>] &amp; <span class="number">0x3f</span>) &lt;&lt; <span class="number">6</span>) + ($bytes[<span class="number">5</span>] &amp; <span class="number">0x3f</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åˆå¹¶ä¸ºä¸€ä¸ªutf-16</span></span><br><span class="line">      $code = ($v0 &lt;&lt; <span class="number">16</span>) + $v1;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// to hex</span></span><br><span class="line">      $code = base_convert($code, <span class="number">10</span>, <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">      $code = mb_convert_encoding(pack(<span class="string">'H*'</span>, $code), <span class="string">'UTF-8'</span>, <span class="string">'UTF-16BE'</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> $code;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="keyword">Exception</span> $e) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'?'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ä¿®å¤æ”¯æŒåœ¨é”™è¯¯javaç«¯ä¸‹è·å–è¾…åŠ©å¹³é¢å­—ç¬¦ï¼ŒåŸæœ¬æ–¹æ³•ä¿®æ”¹åç§°ä¸ºreadUTF8BytesQuick</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@author</span> ç‚’é¥­</span></span><br><span class="line"><span class="comment">   * 2016å¹´10æœˆ14æ—¥17:18:54</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">readUTF8Bytes</span><span class="params">($len)</span></span>&#123;</span><br><span class="line">    $string = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; $len; $i++)&#123;</span><br><span class="line">      $ch = <span class="keyword">$this</span>-&gt;read(<span class="number">1</span>);</span><br><span class="line">      $charCode = ord($ch);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> ($charCode &lt; <span class="number">0x80</span>) &#123;</span><br><span class="line">        $string .= $ch;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (($charCode &amp; <span class="number">0xe0</span>) === <span class="number">0xc0</span>) &#123;</span><br><span class="line">        $string .= $ch.<span class="keyword">$this</span>-&gt;read(<span class="number">1</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> ($charCode === <span class="number">0xed</span>) &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * ä»¥æ¯’æ”»æ¯’</span></span><br><span class="line"><span class="comment">         * 0xD800..0xDBFF</span></span><br><span class="line"><span class="comment">         * è§£å‡ºçš„å­—ç¬¦ï¼Œåœ¨[0xD8, 0xDC)åŒºé—´å†…ï¼Œå³ä¸ºU+10000åˆ°U+10FFFFç ä½çš„å­—ç¬¦</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¯»å–ç¬¬äºŒä¸ªå­—èŠ‚</span></span><br><span class="line">        $ch1 = <span class="keyword">$this</span>-&gt;read();</span><br><span class="line"></span><br><span class="line">        $charCode1 = ord($ch1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¤æ–­ç¬¬äºŒä¸ª4ä½æ˜¯å¦ä¸ºåœ¨[0x8, 0xC)åŒºé—´å†…</span></span><br><span class="line">        $secondFourBit = ($charCode1 &amp; <span class="number">0x3c</span>) &gt;&gt; <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> ($secondFourBit &gt;= <span class="number">0x8</span> &amp;&amp; $secondFourBit &lt; <span class="number">0xC</span>) &#123;</span><br><span class="line">          <span class="comment">// å­—ç¬¦ä¸²offsetå†åç§»ä¸€ä½</span></span><br><span class="line">          $i++;</span><br><span class="line"></span><br><span class="line">          $bytes = [</span><br><span class="line">            $ch,</span><br><span class="line">            $ch1,</span><br><span class="line">            <span class="keyword">$this</span>-&gt;read(<span class="number">1</span>),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;read(<span class="number">1</span>),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;read(<span class="number">1</span>),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;read(<span class="number">1</span>),</span><br><span class="line">          ];</span><br><span class="line"></span><br><span class="line">          <span class="comment">// è¯»å–é—®é¢˜å­—ç¬¦</span></span><br><span class="line">          $string .= <span class="keyword">$this</span>-&gt;readUTF8FromBadStr($bytes);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// å½“åšæ­£å¸¸çš„3ä¸ªå­—ç¬¦ä¸²è¾“å‡º</span></span><br><span class="line">          $string .= $ch . $ch1 . <span class="keyword">$this</span>-&gt;read();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (($charCode &amp; <span class="number">0xf0</span>) === <span class="number">0xe0</span>) &#123;</span><br><span class="line">        <span class="comment">// 3å­—èŠ‚å­—ç¬¦è¯†åˆ«</span></span><br><span class="line">        $string .= $ch . <span class="keyword">$this</span>-&gt;read(<span class="number">2</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (($charCode &amp; <span class="number">0xf8</span>) === <span class="number">0xf0</span>) &#123;</span><br><span class="line">        <span class="comment">// 4å­—èŠ‚å­—ç¬¦è¯†åˆ«</span></span><br><span class="line">        $string .= $ch . <span class="keyword">$this</span>-&gt;read(<span class="number">3</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> HessianParsingException(<span class="string">"Bad utf-8 encoding at pos "</span>.<span class="keyword">$this</span>-&gt;stream-&gt;pos);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(HessianUtils::isInternalUTF8())</span><br><span class="line">      <span class="keyword">return</span> $string;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> utf8_decode($string);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>æœ¬æ–‡ä½¿ç”¨çš„<code>HessianPHP</code>ç‰ˆæœ¬ä¸º<code>v2.0.3</code>ï¼Œæºç æ¥æºäºæ­¤
<a href="https://code.google.com/archive/p/hessianphp/downloads" target="_blank" rel="noopener">HessianPHP</a></p>
<p><code>Java</code>çš„HessianåŒ…ç‰ˆæœ¬ä¸º<code>4.0.37</code>ï¼Œæºç æ¥æºäºæ­¤
<a href="http://hessian.caucho.com/download/hessian-4.0.37-src.jar" target="_blank" rel="noopener">hessian-4.0.37-src.jar</a></p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.ibm.com/developerworks/cn/java/j-unicode/" target="_blank" rel="noopener">ä½¿ç”¨ Java è¯­è¨€è¿›è¡Œ Unicode ä»£ç†ç¼–ç¨‹</a></p>
<p><a href="https://cytle.github.io/2016/10/12/Unicodeã€UTF-16ã€UTF-8ç›¸äº’è½¬æ¢/">Unicodeã€UTF-16ã€UTF-8ç›¸äº’è½¬æ¢</a></p>
<p><a href="http://apps.timwhitlock.info/emoji/tables/unicode" target="_blank" rel="noopener">Emoji Unicode Tables</a></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/10/12/unicodeã€utf-16ã€utf-8ç›¸äº’è½¬æ¢/">Unicodeã€UTF-16ã€UTF-8ç›¸äº’è½¬æ¢</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-10-12
        </span>
        
        
        <div class="post-visits"
             data-url="/2016/10/12/unicodeã€utf-16ã€utf-8ç›¸äº’è½¬æ¢/"
             data-title="Unicodeã€UTF-16ã€UTF-8ç›¸äº’è½¬æ¢">
            é˜…è¯»æ¬¡æ•°
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <blockquote>
<p>æœ¬æ–‡ä»wikiå’Œå…¶å®ƒåšæ–‡ä¸­æ¬äº†ä¸€äº›å®šä¹‰</p>
</blockquote>
<h2 id="å­—ç¬¦å’Œå­—èŠ‚çš„åŒºåˆ«"><a href="#å­—ç¬¦å’Œå­—èŠ‚çš„åŒºåˆ«" class="headerlink" title="å­—ç¬¦å’Œå­—èŠ‚çš„åŒºåˆ«"></a>å­—ç¬¦å’Œå­—èŠ‚çš„åŒºåˆ«</h2><p>å­—èŠ‚(Octet): æ˜¯ä¸€ä¸ªå…«ä½çš„å­˜å‚¨å•å…ƒï¼Œä¹Ÿç§°ä¸ºByte</p>
<p>å­—ç¬¦(Character): é€»è¾‘ä¸Šçš„å­—ï¼Œåƒã€ŒAã€ï¼Œã€Œæ˜¯ã€ï¼Œã€ŒğŸ˜ã€éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦</p>
<h2 id="Unicodeå’ŒUTF"><a href="#Unicodeå’ŒUTF" class="headerlink" title="Unicodeå’ŒUTF"></a>Unicodeå’ŒUTF</h2><p>Unicodeæ˜¯ä¸ºäº†è§£å†³ä¼ ç»Ÿçš„å­—ç¬¦ç¼–ç æ–¹æ¡ˆçš„å±€é™è€Œäº§ç”Ÿçš„ã€‚ç±»ä¼¼æ‰€æœ‰å­—ç¬¦çš„é›†åˆï¼Œæ¯ä¸€ä¸ªå­—ç¬¦åœ¨Unicodeä¸­éƒ½æœ‰å”¯ä¸€ã€ç¼–ç ã€ï¼Œè¿™ä¸ªå€¼ç§°ä¸ºä»£ç ç‚¹ï¼ˆcode pointï¼‰ï¼Œé€šå¸¸ä¼šç”¨â€œU+â€ç„¶åç´§æ¥ç€ä¸€ç»„åå…­è¿›åˆ¶çš„æ•°å­—æ¥è¡¨ç¤ºè¿™ä¸€ä¸ªå­—ç¬¦ã€‚åœ¨åŸºæœ¬å¤šæ–‡ç§å¹³é¢ï¼ˆè‹±æ–‡ï¼šBasic Multilingual Planeï¼Œç®€å†™BMPã€‚åˆç§°ä¸ºâ€œé›¶å·å¹³é¢â€ã€plane 0ï¼‰é‡Œçš„æ‰€æœ‰å­—ç¬¦ï¼Œè¦ç”¨å››ä¸ªæ•°å­—ï¼ˆå³ä¸¤ä¸ªchar,16bit ,ä¾‹å¦‚U+4AE0ï¼Œå…±æ”¯æŒå…­ä¸‡å¤šä¸ªå­—ç¬¦ï¼‰ï¼›åœ¨é›¶å·å¹³é¢ä»¥å¤–çš„å­—ç¬¦åˆ™éœ€è¦ä½¿ç”¨äº”ä¸ªæˆ–å…­ä¸ªæ•°å­—ã€‚</p>
<p>ä¸€ä¸ªå­—ç¬¦çš„Unicodeç¼–ç æ˜¯ç¡®å®šçš„ã€‚ä½†æ˜¯åœ¨å®é™…ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œç”±äºä¸åŒç³»ç»Ÿå¹³å°çš„è®¾è®¡ä¸ä¸€å®šä¸€è‡´ï¼Œä»¥åŠå‡ºäºèŠ‚çœç©ºé—´çš„ç›®çš„ï¼Œå¯¹Unicodeç¼–ç çš„å®ç°æ–¹å¼æœ‰æ‰€ä¸åŒã€‚Unicodeçš„å®ç°æ–¹å¼ç§°ä¸ºUnicodeè½¬æ¢æ ¼å¼ï¼ˆUnicode/UCS Translation Formatï¼Œç®€ç§°ä¸ºUTFï¼‰ã€‚</p>
<p>Unicode.orgå®šä¹‰äº†ç™¾ä¸‡ä¸ªä»¥ä¸Šçš„å­—ç¬¦ï¼Œå¦‚æœå°†æ‰€æœ‰çš„å­—ç¬¦ç”¨å¤§å°è¡¨ç¤ºï¼Œéœ€è¦çš„æ˜¯4ä¸ªå­—èŠ‚ã€‚â€œaâ€œçš„Unicodeè¡¨ç¤ºå°±ä¼šå˜æˆ0x00000061ï¼Œè€Œâ€œä¸€â€œçš„Unicodeå€¼æ˜¯0x00004E00ã€‚å®é™…ä¸Šï¼Œè¿™å°±æ˜¯UTF32ï¼ŒLinuxæ“ä½œç³»ç»Ÿä¸Šæ‰€ä½¿ç”¨çš„Unicodeæ–¹æ¡ˆã€‚è€ŒWindowså¹³å°ä¸‹é»˜è®¤çš„Unicodeç¼–ç æ–¹å¼ä¸ºLittle Endiançš„UTF-16ã€‚</p>
<p><img src="/uploads/unicodeã€utf-16ã€utf-8ç›¸äº’è½¬æ¢/å­—ç¬¦-ç¼–ç -ç¼–ç æ–¹æ¡ˆå…³ç³».jpg" alt="å­—ç¬¦-ç¼–ç -ç¼–ç æ–¹æ¡ˆå…³ç³».jpg"></p>
<h3 id="utf-32ç¼–ç è§„åˆ™"><a href="#utf-32ç¼–ç è§„åˆ™" class="headerlink" title="utf-32ç¼–ç è§„åˆ™"></a>utf-32ç¼–ç è§„åˆ™</h3><p>UTF-32ç”¨å››ä¸ªå­—èŠ‚è¡¨ç¤ºä»£ç ç‚¹ï¼Œè¿™æ ·å°±å¯ä»¥å®Œå…¨è¡¨ç¤ºUCS-4çš„æ‰€æœ‰ä»£ç ç‚¹ï¼Œè€Œæ— éœ€åƒUTF-16é‚£æ ·ä½¿ç”¨å¤æ‚çš„ç®—æ³•ã€‚ä¸UTF-16ç±»ä¼¼ï¼ŒUTF-32ä¹ŸåŒ…æ‹¬UTF-32ã€UTF-32BEã€UTF-32LEä¸‰ç§ç¼–ç ï¼ŒUTF-32ä¹ŸåŒæ ·éœ€è¦BOMå­—ç¬¦ã€‚ä»…ç”¨â€™ABCâ€™ä¸¾ä¾‹ï¼š</p>
<p><img src="/uploads/unicodeã€utf-16ã€utf-8ç›¸äº’è½¬æ¢/utf-32ç¼–ç è§„åˆ™-ABCä¾‹å­.png" alt="utf-32ç¼–ç è§„åˆ™-ABCä¾‹å­.png"></p>
<p>ä½†æ˜¯ï¼Œä»”ç»†åˆ†æå¯ä»¥å‘ç°ï¼Œå…¶å®ç»å¤§éƒ¨åˆ†å­—ç¬¦åªä½¿ç”¨2ä¸ªå­—èŠ‚å°±å¯ä»¥è¡¨ç¤ºäº†ã€‚è‹±æ–‡çš„UnicodeèŒƒå›´æ˜¯0x0000-0x007Fï¼Œä¸­æ–‡çš„UnicodeèŒƒå›´æ˜¯0x4E00-0x9F**ï¼ŒçœŸæ­£éœ€è¦æ‰©å±•åˆ°4ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºçš„å­—ç¬¦å°‘ä¹‹åˆå°‘ï¼Œæ‰€ä»¥æœ‰äº›ç³»ç»Ÿç›´æ¥ä½¿ç”¨2ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºUnicodeã€‚æ¯”å¦‚Windowsç³»ç»Ÿä¸Šï¼ŒUnicodeå°±æ˜¯ä¸¤ä¸ªå­—èŠ‚çš„ã€‚å¯¹äºé‚£äº›éœ€è¦4ä¸ªå­—èŠ‚æ‰èƒ½è¡¨ç¤ºçš„å­—ç¬¦ï¼Œä½¿ç”¨ä¸€ç§ä»£ç†çš„æ‰‹æ³•æ¥æ‰©å±•(å…¶å®å°±æ˜¯åœ¨ä½ä¸¤ä¸ªå­—èŠ‚ä¸Šåšä¸€ä¸ªæ ‡è®°ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªä»£ç†ï¼Œéœ€è¦è¿æ¥ä¸Šéšåçš„ä¸¤ä¸ªå­—èŠ‚ï¼Œæ‰èƒ½ç»„æˆä¸€ä¸ªå­—ç¬¦)ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯å¤§é‡çš„èŠ‚çº¦äº†å­˜å–ç©ºé—´ï¼Œä¹Ÿæé«˜äº†å¤„ç†çš„é€Ÿåº¦ã€‚è¿™ç§Unicodeè¡¨ç¤ºæ–¹æ³•å°±æ˜¯UTF16ã€‚ä¸€èˆ¬åœ¨Windowså¹³å°ä¸Šï¼Œæåˆ°Unicode,é‚£å°±æ˜¯æŒ‡UTF16äº†ã€‚</p>
<h3 id="utf-16ç¼–ç è§„åˆ™"><a href="#utf-16ç¼–ç è§„åˆ™" class="headerlink" title="utf-16ç¼–ç è§„åˆ™"></a>utf-16ç¼–ç è§„åˆ™</h3><p>UTF-16ç”±RFC2781è§„å®šï¼Œå®ƒä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªä»£ç ç‚¹ã€‚</p>
<p>ä¸éš¾çŒœåˆ°ï¼ŒUTF-16æ˜¯å®Œå…¨å¯¹åº”äºUCS-2çš„ï¼Œå³æŠŠUCS-2è§„å®šçš„ä»£ç ç‚¹é€šè¿‡Big Endianæˆ–Little Endianæ–¹å¼ç›´æ¥ä¿å­˜ä¸‹æ¥ã€‚UTF-16åŒ…æ‹¬ä¸‰ç§ï¼šUTF-16ï¼ŒUTF-16BEï¼ˆBig Endianï¼‰ï¼ŒUTF-16LEï¼ˆLittle Endianï¼‰ã€‚</p>
<p>UTF-16BEå’ŒUTF-16LEä¸éš¾ç†è§£ï¼Œè€ŒUTF-16å°±éœ€è¦é€šè¿‡åœ¨æ–‡ä»¶å¼€å¤´ä»¥åä¸ºBOMï¼ˆByte Order Markï¼‰çš„å­—ç¬¦æ¥è¡¨æ˜æ–‡ä»¶æ˜¯Big Endianè¿˜æ˜¯Little Endianã€‚BOMä¸ºU+FEFFè¿™ä¸ªå­—ç¬¦ã€‚</p>
<p>å…¶å®BOMæ˜¯ä¸ªå°èªæ˜çš„æƒ³æ³•ã€‚ç”±äºUCS-2æ²¡æœ‰å®šä¹‰U+FFFEï¼Œå› æ­¤åªè¦å‡ºç° FF FE æˆ–è€… FE FF è¿™æ ·çš„å­—èŠ‚åºåˆ—ï¼Œå°±å¯ä»¥è®¤ä¸ºå®ƒæ˜¯U+FEFFï¼Œå¹¶ä¸”å¯ä»¥åˆ¤æ–­å‡ºæ˜¯Big Endianè¿˜æ˜¯Little Endianã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ã€‚â€œABCâ€è¿™ä¸‰ä¸ªå­—ç¬¦ç”¨å„ç§æ–¹å¼ç¼–ç åçš„ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="/uploads/unicodeã€utf-16ã€utf-8ç›¸äº’è½¬æ¢/utf-16ç¼–ç è§„åˆ™-ABCä¾‹å­.png" alt="utf-16ç¼–ç è§„åˆ™-ABCä¾‹å­.png"></p>
<p>Windowså¹³å°ä¸‹é»˜è®¤çš„Unicodeç¼–ç ä¸ºLittle Endiançš„UTF-16ï¼ˆå³ä¸Šè¿°çš„ FF FE 41 00 42 00 43 00ï¼‰ã€‚ä½ å¯ä»¥æ‰“å¼€è®°äº‹æœ¬ï¼Œå†™ä¸ŠABCï¼Œç„¶åä¿å­˜ï¼Œå†ç”¨äºŒè¿›åˆ¶ç¼–è¾‘å™¨çœ‹çœ‹å®ƒçš„ç¼–ç ç»“æœã€‚</p>
<h3 id="utf-8ç¼–ç è§„åˆ™"><a href="#utf-8ç¼–ç è§„åˆ™" class="headerlink" title="utf-8ç¼–ç è§„åˆ™"></a>utf-8ç¼–ç è§„åˆ™</h3><p>UTF-16å’ŒUTF-32çš„ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯å®ƒä»¬å›ºå®šä½¿ç”¨ä¸¤ä¸ªæˆ–å››ä¸ªå­—èŠ‚ï¼Œè¿™æ ·åœ¨è¡¨ç¤ºçº¯ASCIIæ–‡ä»¶æ—¶ä¼šæœ‰å¾ˆå¤š00å­—èŠ‚ï¼Œé€ æˆæµªè´¹ã€‚è€ŒRFC3629å®šä¹‰çš„ UTF-8åˆ™è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚UTF-8ç”¨1ï½4ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä»£ç ç‚¹ã€‚è¡¨ç¤ºæ–¹å¼å¦‚ä¸‹ï¼š</p>
<p><table style="font-size: 0.75em;">
    <tbody>
        <tr>
            <th style="width: auto;">
                ä»£ç èŒƒå›´<br>
                åå…­è¿›åˆ¶
            </th>
            <th style="width: auto;">
                æ ‡é‡å€¼ï¼ˆscalar valueï¼‰<br>
                äºŒè¿›åˆ¶
            </th>
            <th style="width: auto;">
                UTF-8
                <br>
                åå…­è¿›åˆ¶
            </th>
            <th style="width: 25%;">æ³¨é‡Š</th>
        </tr>
        <tr>
            <td rowspan="2">
                000000 - 00007F
                <br>
                <small>128ä¸ªä»£ç </small>
            </td>
            <td>00000000 00000000 0zzzzzzz</td>
            <td>0zzzzzzzï¼ˆ00-7Fï¼‰</td>
            <td rowspan="2">ASCIIå­—ç¬¦èŒƒå›´ï¼Œå­—èŠ‚ç”±é›¶å¼€å§‹</td>
        </tr>
        <tr>
            <td><small>ä¸ƒä¸ªz</small></td>
            <td><small>ä¸ƒä¸ªz</small></td>
        </tr>
        <tr>
            <td rowspan="2">
                000080 - 0007FF<br>
                <small>1920ä¸ªä»£ç </small>
            </td>
            <td>00000000 00000yyy yyzzzzzz</td>
            <td style="text-align: left;">110yyyyyï¼ˆC0-DF) 10zzzzzz(80-BFï¼‰</td>
            <td rowspan="2" align="top">ç¬¬ä¸€ä¸ªå­—èŠ‚ç”±110å¼€å§‹ï¼Œæ¥ç€çš„å­—èŠ‚ç”±10å¼€å§‹</td>
        </tr>
        <tr>
            <td><small>ä¸‰ä¸ªyï¼›äºŒä¸ªyï¼›å…­ä¸ªz</small></td>
            <td><small>äº”ä¸ªyï¼›å…­ä¸ªz</small></td>
        </tr>
        <tr>
            <td rowspan="2">
                000800 - 00D7FF<br>
                00E000 - 00FFFF<br>
                <small>61440ä¸ªä»£ç  <b>æ³¨<sup>1</sup></b></small>
            </td>
            <td>00000000 xxxxyyyy yyzzzzzz</td>
            <td style="text-align: left;">1110xxxx(E0-EF) 10yyyyyy 10zzzzzz</td>
            <td rowspan="2" align="top">ç¬¬ä¸€ä¸ªå­—èŠ‚ç”±1110å¼€å§‹ï¼Œæ¥ç€çš„å­—èŠ‚ç”±10å¼€å§‹</td>
        </tr>
        <tr>
            <td><small>å››ä¸ªxï¼›å››ä¸ªyï¼›äºŒä¸ªyï¼›å…­ä¸ªz</small></td>
            <td><small>å››ä¸ªxï¼›å…­ä¸ªyï¼›å…­ä¸ªz</small></td>
        </tr>
        <tr>
            <td rowspan="2">
                010000 - 10FFFF<br>
                <small>1048576ä¸ªä»£ç </small>
            </td>
            <td>000wwwxx xxxxyyyy yyzzzzzz</td>
            <td style="text-align: left;">11110www(F0-F7) 10xxxxxx 10yyyyyy 10zzzzzz</td>
            <td rowspan="2">å°†ç”±11110å¼€å§‹ï¼Œæ¥ç€çš„å­—èŠ‚ç”±10å¼€å§‹</td>
        </tr>
        <tr>
            <td><small>ä¸‰ä¸ªwï¼›äºŒä¸ªxï¼›å››ä¸ªxï¼›å››ä¸ªyï¼›äºŒä¸ªyï¼›å…­ä¸ªz</small></td>
            <td><small>ä¸‰ä¸ªwï¼›å…­ä¸ªxï¼›å…­ä¸ªyï¼›å…­ä¸ªz</small></td>
        </tr>
    </tbody>
</table>
<sub>
    <b>æ³¨<sup>1</sup></b>ï¼šUnicodeåœ¨èŒƒå›´D800-DFFFä¸­ä¸å­˜åœ¨ä»»ä½•å­—ç¬¦ï¼ŒåŸºæœ¬å¤šæ–‡ç§å¹³é¢ä¸­çº¦å®šäº†è¿™ä¸ªèŒƒå›´ç”¨äºUTF-16æ‰©å±•æ ‡è¯†è¾…åŠ©å¹³é¢ï¼ˆä¸¤ä¸ªUTF-16è¡¨ç¤ºä¸€ä¸ªè¾…åŠ©å¹³é¢å­—ç¬¦ï¼‰ã€‚å½“ç„¶ï¼Œä»»ä½•ç¼–ç éƒ½æ˜¯å¯ä»¥è¢«è½¬æ¢åˆ°è¿™ä¸ªèŒƒå›´ï¼Œä½†åœ¨unicodeä¸­ä»–ä»¬å¹¶ä¸ä»£è¡¨ä»»ä½•åˆæ³•çš„å€¼ã€‚
</sub></p>
<p>å¯è§ï¼ŒASCIIå­—ç¬¦ï¼ˆU+0000ï½U+007Fï¼‰éƒ¨åˆ†å®Œå…¨ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œé¿å…äº†å­˜å‚¨ç©ºé—´çš„æµªè´¹ã€‚è€Œä¸”UTF-8ä¸å†éœ€è¦BOMå­—èŠ‚ã€‚</p>
<p>å¦å¤–ï¼Œä»ä¸Šè¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼Œå•å­—èŠ‚ç¼–ç çš„ç¬¬ä¸€å­—èŠ‚ä¸º[00-7F]ï¼ŒåŒå­—èŠ‚ç¼–ç çš„ç¬¬ä¸€å­—èŠ‚ä¸º[C2-DF]ï¼Œä¸‰å­—èŠ‚ç¼–ç çš„ç¬¬ä¸€å­—èŠ‚ä¸º[E0-EF]ã€‚è¿™æ ·åªè¦çœ‹åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚çš„èŒƒå›´å°±å¯ä»¥çŸ¥é“ç¼–ç çš„å­—èŠ‚æ•°ã€‚è¿™æ ·ä¹Ÿå¯ä»¥å¤§å¤§ç®€åŒ–ç®—æ³•ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://zh.wikipedia.org/wiki/Unicode" target="_blank" rel="noopener">wiki:Unicode</a></p>
<p>[wiki:UTF-8]a</p>
<p><a href="https://zh.wikipedia.org/wiki/UTF-16" target="_blank" rel="noopener">wiki:UTF-16</a></p>
<p><a href="http://www.cnblogs.com/skyaspnet/archive/2011/02/18/1957770.html" target="_blank" rel="noopener">å­—ç¬¦ç¼–ç é—®é¢˜ï¼ŒUNICODE\UTF-8\UTF-16\UTF-32\UCS\ANSI\GBK\GB2312ç­‰ä¹±ä¸ƒå…«ç³Ÿçš„åè¯</a>
 â€“ æµ…æ˜¾æ˜“æ‡‚çš„è¯´æ˜å­—ç¬¦ç¼–ç ï¼Œè¿˜æœ‰Big Endianå’ŒLittle Endiançš„è¯´æ˜</p>
<p><a href="http://www.sxt.cn/u/756/blog/2773" target="_blank" rel="noopener">æ·±å…¥å›¾è§£å­—ç¬¦é›†ä¸å­—ç¬¦é›†ç¼–ç ï¼ˆäºŒï¼‰â€”â€”å­—ç¬¦é›†åŠå…¶ç¼–å·</a></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/10/11/nginx-locationåŒ¹é…å‘½ä»¤/">nginx-locationåŒ¹é…å‘½ä»¤</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-10-11
        </span>
        
        
        <div class="post-visits"
             data-url="/2016/10/11/nginx-locationåŒ¹é…å‘½ä»¤/"
             data-title="nginx-locationåŒ¹é…å‘½ä»¤">
            é˜…è¯»æ¬¡æ•°
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <h2 id="locationåŒ¹é…å‘½ä»¤"><a href="#locationåŒ¹é…å‘½ä»¤" class="headerlink" title="locationåŒ¹é…å‘½ä»¤"></a>locationåŒ¹é…å‘½ä»¤</h2><table>
<thead>
<tr>
<th style="text-align:center">ç¬¦åˆ</th>
<th style="text-align:left">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">~</td>
<td style="text-align:left">æ³¢æµªçº¿è¡¨ç¤ºæ‰§è¡Œä¸€ä¸ªæ­£åˆ™åŒ¹é…ï¼ŒåŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td style="text-align:center">~*</td>
<td style="text-align:left">è¡¨ç¤ºæ‰§è¡Œä¸€ä¸ªæ­£åˆ™åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td style="text-align:center">^~</td>
<td style="text-align:left">^~è¡¨ç¤ºæ™®é€šå­—ç¬¦åŒ¹é…ï¼Œå¦‚æœè¯¥é€‰é¡¹åŒ¹é…ï¼ŒåªåŒ¹é…è¯¥é€‰é¡¹ï¼Œä¸åŒ¹é…åˆ«çš„é€‰é¡¹ï¼Œä¸€èˆ¬ç”¨æ¥åŒ¹é…ç›®å½•</td>
</tr>
<tr>
<td style="text-align:center">=</td>
<td style="text-align:left">è¿›è¡Œæ™®é€šå­—ç¬¦ç²¾ç¡®åŒ¹é…</td>
</tr>
<tr>
<td style="text-align:center">@</td>
<td style="text-align:left">â€œ@â€ å®šä¹‰ä¸€ä¸ªå‘½åçš„ locationï¼Œä½¿ç”¨åœ¨å†…éƒ¨å®šå‘æ—¶ï¼Œä¾‹å¦‚ error_page, try_files</td>
</tr>
</tbody>
</table>
<h3 id="location-åŒ¹é…çš„ä¼˜å…ˆçº§-ä¸locationåœ¨é…ç½®æ–‡ä»¶ä¸­çš„é¡ºåºæ— å…³"><a href="#location-åŒ¹é…çš„ä¼˜å…ˆçº§-ä¸locationåœ¨é…ç½®æ–‡ä»¶ä¸­çš„é¡ºåºæ— å…³" class="headerlink" title="location åŒ¹é…çš„ä¼˜å…ˆçº§(ä¸locationåœ¨é…ç½®æ–‡ä»¶ä¸­çš„é¡ºåºæ— å…³)"></a>location åŒ¹é…çš„ä¼˜å…ˆçº§(ä¸locationåœ¨é…ç½®æ–‡ä»¶ä¸­çš„é¡ºåºæ— å…³)</h3><p>= ç²¾ç¡®åŒ¹é…ä¼šç¬¬ä¸€ä¸ªè¢«å¤„ç†ã€‚å¦‚æœå‘ç°ç²¾ç¡®åŒ¹é…ï¼Œnginxåœæ­¢æœç´¢å…¶ä»–åŒ¹é…ã€‚
æ™®é€šå­—ç¬¦åŒ¹é…ï¼Œæ­£åˆ™è¡¨è¾¾å¼è§„åˆ™å’Œé•¿çš„å—è§„åˆ™å°†è¢«ä¼˜å…ˆå’ŒæŸ¥è¯¢åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœè¯¥é¡¹åŒ¹é…è¿˜éœ€å»çœ‹æœ‰æ²¡æœ‰æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å’Œæ›´é•¿çš„åŒ¹é…ã€‚</p>
<p>^~ åˆ™åªåŒ¹é…è¯¥è§„åˆ™ï¼Œnginxåœæ­¢æœç´¢å…¶ä»–åŒ¹é…ï¼Œå¦åˆ™nginxä¼šç»§ç»­å¤„ç†å…¶ä»–locationæŒ‡ä»¤ã€‚
æœ€ååŒ¹é…ç†å¸¦æœ‰â€~â€å’Œâ€~*â€çš„æŒ‡ä»¤ï¼Œå¦‚æœæ‰¾åˆ°ç›¸åº”çš„åŒ¹é…ï¼Œåˆ™nginxåœæ­¢æœç´¢å…¶ä»–åŒ¹é…ï¼›å½“æ²¡æœ‰æ­£åˆ™è¡¨è¾¾å¼æˆ–è€…æ²¡æœ‰æ­£åˆ™è¡¨è¾¾å¼è¢«åŒ¹é…çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆåŒ¹é…ç¨‹åº¦æœ€é«˜çš„é€å­—åŒ¹é…æŒ‡ä»¤ä¼šè¢«ä½¿ç”¨ã€‚</p>
<h4 id="location-ä¼˜å…ˆçº§å®˜æ–¹æ–‡æ¡£"><a href="#location-ä¼˜å…ˆçº§å®˜æ–¹æ–‡æ¡£" class="headerlink" title="location ä¼˜å…ˆçº§å®˜æ–¹æ–‡æ¡£"></a>location ä¼˜å…ˆçº§å®˜æ–¹æ–‡æ¡£</h4><p>Directives with the = prefix that match the query exactly. If found, searching stops.
All remaining directives with conventional strings, longest match first. If this match used the ^~ prefix, searching stops.</p>
<p>Regular expressions, in order of definition in the configuration file.
If #3 yielded a match, that result is used. Else the match from #2 is used.</p>
<p>=å‰ç¼€çš„æŒ‡ä»¤ä¸¥æ ¼åŒ¹é…è¿™ä¸ªæŸ¥è¯¢ã€‚å¦‚æœæ‰¾åˆ°ï¼Œåœæ­¢æœç´¢ã€‚</p>
<p>æ‰€æœ‰å‰©ä¸‹çš„å¸¸è§„å­—ç¬¦ä¸²ï¼Œæœ€é•¿çš„åŒ¹é…ã€‚å¦‚æœè¿™ä¸ªåŒ¹é…ä½¿ç”¨^ã€œå‰ç¼€ï¼Œæœç´¢åœæ­¢ã€‚</p>
<p>æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„é¡ºåºã€‚</p>
<p>å¦‚æœç¬¬3æ¡è§„åˆ™äº§ç”ŸåŒ¹é…çš„è¯ï¼Œç»“æœè¢«ä½¿ç”¨ã€‚å¦åˆ™ï¼Œå¦‚åŒä»ç¬¬2æ¡è§„åˆ™è¢«ä½¿ç”¨ã€‚</p>
<p>ä¾‹å¦‚</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span>  = / &#123;</span><br><span class="line">  <span class="comment"># åªåŒ¹é…"/".</span></span><br><span class="line">  <span class="comment"># [ configuration A ]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">location</span>  / &#123;</span><br><span class="line">  <span class="comment"># åŒ¹é…ä»»ä½•è¯·æ±‚ï¼Œå› ä¸ºæ‰€æœ‰è¯·æ±‚éƒ½æ˜¯ä»¥"/"å¼€å§‹</span></span><br><span class="line">  <span class="comment"># ä½†æ˜¯æ›´é•¿å­—ç¬¦åŒ¹é…æˆ–è€…æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ä¼šä¼˜å…ˆåŒ¹é…</span></span><br><span class="line">  <span class="comment"># [ configuration B ]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">location</span><span class="regexp"> ^~</span> /images/ &#123;</span><br><span class="line">  <span class="comment"># åŒ¹é…ä»»ä½•ä»¥ /images/ å¼€å§‹çš„è¯·æ±‚ï¼Œå¹¶åœæ­¢åŒ¹é… å…¶å®ƒlocation</span></span><br><span class="line">  <span class="comment"># [ configuration C ]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~* .(gif|jpg|jpeg)$</span> &#123;</span><br><span class="line">  <span class="comment"># åŒ¹é…ä»¥ gif, jpg, or jpegç»“å°¾çš„è¯·æ±‚.</span></span><br><span class="line">  <span class="comment"># ä½†æ˜¯æ‰€æœ‰ /images/ ç›®å½•çš„è¯·æ±‚å°†ç”± [Configuration C]å¤„ç†.</span></span><br><span class="line">  <span class="comment"># [ configuration D ]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯·æ±‚URIä¾‹å­:</p>
<p>/ -&gt; ç¬¦åˆconfiguration A</p>
<p>/documents/document.html -&gt; ç¬¦åˆconfiguration B</p>
<p>/images/1.gif -&gt; ç¬¦åˆconfiguration C</p>
<p>/documents/1.jpg -&gt;ç¬¦åˆ configuration D</p>
<p>@location ä¾‹å­
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">error_page</span> <span class="number">404</span> = <span class="variable">@fetch</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">location</span> <span class="variable">@fetch</span>(</span><br><span class="line">  proxy_pass http://fetch;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>è½¬è½½è¯·ä¿ç•™: <a href="http://www.nginx.cn/115.html" target="_blank" rel="noopener">http://www.nginx.cn/115.html</a></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/09/25/iterm-zsh-tmux/">iterm+zsh+tmux</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-09-25
        </span>
        
        
        <div class="post-visits"
             data-url="/2016/09/25/iterm-zsh-tmux/"
             data-title="iterm+zsh+tmux">
            é˜…è¯»æ¬¡æ•°
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p><img src="/uploads/iterm-zsh-tmux/æ•ˆæœ.png" alt="æ•ˆæœ"></p>
<h2 id="tmux"><a href="#tmux" class="headerlink" title="tmux"></a>tmux</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install tmux</span><br></pre></td></tr></table></figure>
<h2 id="YADR"><a href="#YADR" class="headerlink" title="YADR"></a>YADR</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install rake</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> install YADR</span><br><span class="line"><span class="meta">#</span> http://www.agileventures.org/articles/setting-up-yadr-on-ubuntu</span><br><span class="line">sh -c "`curl -fsSL https://raw.githubusercontent.com/skwp/dotfiles/master/install.sh`"</span><br><span class="line"></span><br><span class="line">nautilus ~/.yadr/fonts/</span><br></pre></td></tr></table></figure>
<p>ç»ˆç«¯é…è‰²æ–¹æ¡ˆä¿®æ”¹ä¸º<code>solarized</code></p>
<p>ç¼–è¾‘ &gt; ç¼–è¾‘é…ç½®æ–‡ä»¶ &gt; é¢œè‰²</p>
<p><img src="/uploads/iterm-zsh-tmux/ç»ˆç«¯é…ç½®.png" alt="ç»ˆç«¯é…ç½®"></p>
<h2 id="tmux-powerline"><a href="#tmux-powerline" class="headerlink" title="tmux-powerline"></a>tmux-powerline</h2><p><a href="https://github.com/erikw/tmux-powerline" target="_blank" rel="noopener">tmux-powerline</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TMUX_POWERLINE_PATH=~/.tmux-powerline</span><br><span class="line">git clone https://github.com/erikw/tmux-powerline.git $TMUX_POWERLINE_PATH</span><br></pre></td></tr></table></figure>
<p>ç¼–è¾‘<code>.tmux.conf</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">set-option -g status on</span><br><span class="line">set-option -g status-interval 2</span><br><span class="line">set-option -g status-justify "centre"</span><br><span class="line">set-option -g status-left-length 60</span><br><span class="line">set-option -g status-right-length 90</span><br><span class="line">set-option -g status-left "#(~/path/to/tmux-powerline/powerline.sh left)"</span><br><span class="line">set-option -g status-right "#(~/path/to/tmux-powerline/powerline.sh right)"</span><br><span class="line"></span><br><span class="line">set-window-option -g window-status-current-format "#[fg=colour235, bg=colour27]â®€#[fg=colour255, bg=colour27] #I â® #W #[fg=colour27, bg=colour235]â®€"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> You can toggle the visibility of the statusbars</span><br><span class="line">bind C-[ run '~/path/to/tmux-powerline/mute_powerline.sh left'      # Mute left statusbar.</span><br><span class="line">bind C-] run '~/path/to/tmux-powerline/mute_powerline.sh right'     # Mute right statusbar.</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®åŸå¸‚"><a href="#é…ç½®åŸå¸‚" class="headerlink" title="é…ç½®åŸå¸‚"></a>é…ç½®åŸå¸‚</h3><p>â€¦</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="http://www.drbunsen.org/the-text-triumvirate/" target="_blank" rel="noopener">The Text Triumvirate</a></p>
<p><a href="https://github.com/skwp/dotfiles" target="_blank" rel="noopener">YADR</a></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/09/24/Hessian-è°ƒç”¨javaé‡è½½æ–¹æ³•/">Hessian-è°ƒç”¨javaé‡è½½æ–¹æ³•</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-09-24
        </span>
        
        
        <div class="post-visits"
             data-url="/2016/09/24/Hessian-è°ƒç”¨javaé‡è½½æ–¹æ³•/"
             data-title="Hessian-è°ƒç”¨javaé‡è½½æ–¹æ³•">
            é˜…è¯»æ¬¡æ•°
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <blockquote>
<p>é‡è½½(overloading) æ˜¯åœ¨ä¸€ä¸ªç±»é‡Œé¢ï¼Œæ–¹æ³•åå­—ç›¸åŒï¼Œè€Œå‚æ•°ä¸åŒã€‚è¿”å›ç±»å‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸åŒã€‚æ¯ä¸ªé‡
è½½çš„æ–¹æ³•ï¼ˆæˆ–è€…æ„é€ å‡½æ•°ï¼‰éƒ½æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å‚æ•°ç±»å‹åˆ—è¡¨ã€‚</p>
</blockquote>
<h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>Hessiançš„å®¢æˆ·ç«¯ï¼ˆè°ƒç”¨è€…ï¼Œå¦‚PHPï¼‰ä¸èƒ½ä¹Ÿä¸ä¼šè¯†åˆ«è°ƒç”¨çš„å‚æ•°ç±»å‹ï¼Œä»è€Œä¼ é€’ç›¸åº”çš„å‚æ•°åˆ—è¡¨ã€‚å¦ä¸€æ–¹é¢java
ç«¯æ¥å—è¯·æ±‚åï¼Œåªé€šè¿‡æ–¹æ³•åå’Œå‚æ•°æ•°é‡æ¥å–å¾—æ–¹æ³•ã€‚</p>
<p>åœ¨ä½¿ç”¨åƒphpè¿™æ ·çš„å¼±ç±»å‹è¯­è¨€é€šè¿‡<code>Hessian</code>è°ƒç”¨javaç«¯æœåŠ¡æ—¶ï¼Œé‡è½½æ–¹æ³•çš„ä½¿ç”¨å­˜åœ¨é—®é¢˜ã€‚</p>
<h3 id="æºç æŸ¥çœ‹"><a href="#æºç æŸ¥çœ‹" class="headerlink" title="æºç æŸ¥çœ‹"></a>æºç æŸ¥çœ‹</h3><p>ä¸‹é¢æ¥çœ‹æœåŠ¡ç«¯çš„æºç ï¼š</p>
<h4 id="äº§ç”Ÿæ–¹æ³•åˆ—è¡¨"><a href="#äº§ç”Ÿæ–¹æ³•åˆ—è¡¨" class="headerlink" title="äº§ç”Ÿæ–¹æ³•åˆ—è¡¨"></a>äº§ç”Ÿæ–¹æ³•åˆ—è¡¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com.caucho.services.server.AbstractSkeleton</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="title">AbstractSkeleton</span><span class="params">(Class apiClass)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    _apiClass = apiClass;</span><br><span class="line">    Method []methodList = apiClass.getMethods();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; methodList.length; i++) &#123;</span><br><span class="line">      Method method = methodList[i];</span><br><span class="line"></span><br><span class="line">      <span class="comment">// put æ–¹æ³•å</span></span><br><span class="line">      <span class="keyword">if</span> (_methodMap.get(method.getName()) == <span class="keyword">null</span>)</span><br><span class="line">        _methodMap.put(method.getName(), methodList[i]);</span><br><span class="line"></span><br><span class="line">      Class []param = method.getParameterTypes();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// put æ–¹æ³•å + å‚æ•°æ•°é‡</span></span><br><span class="line">      String mangledName = method.getName() + <span class="string">"__"</span> + param.length;</span><br><span class="line">      _methodMap.put(mangledName, methodList[i]);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// put æ–¹æ³•å + æ¯ä¸ªå‚æ•°ç±»å‹(ä¸å®Œæ•´çš„ç±»å‹å)</span></span><br><span class="line">      _methodMap.put(mangleName(method, <span class="keyword">false</span>), methodList[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">mangleName</span><span class="params">(Method method, <span class="keyword">boolean</span> isFull)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line"></span><br><span class="line">    sb.append(method.getName());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ–¹æ³•çš„å‚æ•°åˆ—è¡¨</span></span><br><span class="line">    Class []params = method.getParameterTypes();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">      sb.append(<span class="string">'_'</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å‚æ•°çš„ç±»å‹</span></span><br><span class="line">      sb.append(mangleClass(params[i], isFull));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sb.toString();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢è¿™æ®µç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“hessianæŒ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ä½œä¸ºkeyå­˜äº†æ–¹æ³•</p>
<ul>
<li>æ–¹æ³•å</li>
<li>æ–¹æ³•å + å‚æ•°æ•°é‡</li>
<li>æ–¹æ³•å + æ¯ä¸ªå‚æ•°ç±»å‹(ä¸å®Œæ•´çš„ç±»å‹å)</li>
</ul>
<h4 id="è·å–æ–¹æ³•"><a href="#è·å–æ–¹æ³•" class="headerlink" title="è·å–æ–¹æ³•"></a>è·å–æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com.caucho.hessian.server.HessianSkeleton extends AbstractSkeleton</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="comment">// Line 247,254</span></span><br><span class="line">    Method method;</span><br><span class="line">    <span class="comment">// é€šè¿‡æ–¹æ³•å + å‚æ•°æ•°é‡ è·å–</span></span><br><span class="line">    method = getMethod(methodName + <span class="string">"__"</span> + argLength);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡æ–¹æ³•åè·å–</span></span><br><span class="line">    <span class="keyword">if</span> (method == <span class="keyword">null</span>)</span><br><span class="line">      method = getMethod(methodName);</span><br></pre></td></tr></table></figure>
<h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p>å½“æœ‰ä»¥ä¸‹ä¸€ä¸ªæ¥å£æ—¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TestService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">(<span class="keyword">int</span> uid)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†äº§ç”Ÿä»¥ä¸‹æ–¹æ³•</p>
<ul>
<li>getName</li>
<li>getName__1</li>
<li>getName_User</li>
<li>getName_int</li>
</ul>
<p>å¦‚æœæˆ‘ä»¬åœ¨å®¢æˆ·ç«¯ä¸­è°ƒç”¨æ—¶</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">getUser(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾ $user æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">getUser($user);</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·è°ƒç”¨ï¼Œjavaç«¯ä¼šé€‰æ‹©åŒä¸€ä¸ªæ–¹æ³•ï¼ŒgetName__1ï¼Œå¯èƒ½æ˜¯<code>getName(User user)</code>æˆ–è€…
<code>getName(int uid)</code>ï¼Œå¾ˆæœ‰å¯èƒ½å°±æŠ¥<code>unsafeDeserialize</code>å¼‚å¸¸äº†ã€‚</p>
<p>åœ¨ä½¿ç”¨è¿™æ ·å‚æ•°æ•°é‡ç›¸åŒçš„é‡è½½æ–¹æ³•æ—¶ï¼ŒæŒ‰ç…§javaç«¯çš„è·å–è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆè°ƒç”¨</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">getUser_int(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›´æ¥è·Ÿä¸Šå‚æ•°ç±»å‹</span></span><br><span class="line">getUser_User($user);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœå¤šä¸ªç»§ç»­åœ¨åé¢åŠ å°¾ç¼€ï¼Œç±»å‹å¤§å°å†™å’Œjavaä¸€è‡´</span></span><br><span class="line"><span class="comment">// getUser_User_int_String($user);</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥å®Œç¾è°ƒç”¨é‡è½½çš„æ–¹æ³•äº†ã€‚</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/09/22/Hessian-2-0åºåˆ—åŒ–åè®®è§„èŒƒ/">Hessian-2.0åºåˆ—åŒ–åè®®è§„èŒƒ</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-09-22
        </span>
        
        
        <div class="post-visits"
             data-url="/2016/09/22/Hessian-2-0åºåˆ—åŒ–åè®®è§„èŒƒ/"
             data-title="Hessian-2.0åºåˆ—åŒ–åè®®è§„èŒƒ">
            é˜…è¯»æ¬¡æ•°
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>ç¿»è¯‘: Edison peng</p>
<p><a href="/uploads/hessianåè®®ä¸­æ–‡ç‰ˆ.docx">wordç‰ˆä¸‹è½½</a></p>
<h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1.æ¦‚è¿°"></a>1.æ¦‚è¿°</h2><p><code>Hessian</code>æ˜¯ä¸€ä¸ªè½»é‡çº§çš„,è‡ªå®šä¹‰æè¿°çš„äºŒè¿›åˆ¶RPCåè®®ã€‚<code>Hessian</code>ä¸»è¦ç”¨ä½œé¢å‘å¯¹è±¡çš„æ¶ˆæ¯é€šä¿¡ã€‚</p>
<h2 id="2-è®¾è®¡ç›®æ ‡"><a href="#2-è®¾è®¡ç›®æ ‡" class="headerlink" title="2.è®¾è®¡ç›®æ ‡"></a>2.è®¾è®¡ç›®æ ‡</h2><p><code>Hessian</code>çš„åˆè¡·æ˜¯æ”¯æŒåŠ¨æ€ç±»å‹ï¼Œæ ¼å¼ç´§å‡‘ï¼Œè·¨è¯­è¨€.</p>
<p><code>Hessian</code>åè®®çš„è®¾è®¡ç›®æ ‡å¦‚ä¸‹:</p>
<ul>
<li>å¯åºåˆ—åŒ–ç±»å‹å¿…é¡»æ˜¯å¯ä»¥è‡ªæè¿°çš„, i.e. ä¸éœ€è¦é¢å¤–çš„æ¨¡å¼(schema)æˆ–æ¥å£å®šä¹‰.</li>
<li>å¿…é¡»æ˜¯è¯­è¨€ç‹¬ç«‹çš„, åŒ…æ‹¬å¯¹è„šæœ¬è¯­è¨€çš„æ”¯æŒ.</li>
<li>It must be readable or writable in a single pass.</li>
<li>å¿…é¡»è®¾è®¡ç´§å‡‘.</li>
<li>å¿…é¡»è¶³å¤Ÿç®€å•ï¼Œä»¥ä¾¿æµ‹è¯•å’Œå®ç°.</li>
<li>é«˜æ•ˆç‡.</li>
<li>å¿…é¡»æ”¯æŒUnicodeå­—ç¬¦é›†.</li>
<li>æ”¯æŒ8-bitäºŒè¿›åˆ¶æ•°æ®ï¼Œwithout escaping or using attachments.</li>
<li>å¿…é¡»æ”¯æŒåŠ å¯†, å‹ç¼©, ç­¾å and transaction context envelopes.</li>
</ul>
<h2 id="3-Hessianè¯­æ³•"><a href="#3-Hessianè¯­æ³•" class="headerlink" title="3. Hessianè¯­æ³•"></a>3. <code>Hessian</code>è¯­æ³•</h2><p>åºåˆ—åŒ–è¯­æ³•
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">        #starting production</span><br><span class="line">top     ::=value</span><br><span class="line"></span><br><span class="line">        #åˆ†å‰²æˆ64kæ¯chunkçš„8-bitäºŒè¿›åˆ¶æ•°æ®</span><br><span class="line">binary  ::= &apos;b&apos; b1 b0 &lt;binary-data&gt; binary  #ä¸æ˜¯æœ€åä¸€ä¸ªchunk</span><br><span class="line">        ::= &apos;B&apos; b1 b0 &lt;binary-data&gt;         #æœ€åä¸€ä¸ªchunk</span><br><span class="line">        ::= [x20-x2f] &lt;binary-data&gt;         #é•¿åº¦èŒƒå›´ä¸º 0-15</span><br><span class="line"></span><br><span class="line">        #boolean true/false</span><br><span class="line">boolean ::= &apos;T&apos;</span><br><span class="line">        ::= &apos;F&apos;</span><br><span class="line"></span><br><span class="line">        #å¯¹è±¡çš„å®šä¹‰(compact map)</span><br><span class="line">class-def ::= &apos;O&apos; type int string*</span><br><span class="line"></span><br><span class="line">        #time in UTC encoded as 64-bit long milliseconds since epoch</span><br><span class="line">date    ::= &apos;d&apos; b7 b6 b5 b4 b3 b2 b1 b0</span><br><span class="line"></span><br><span class="line">        #64-bit IEEE double</span><br><span class="line">double  ::= &apos;D&apos; b7 b6 b5 b4 b3 b2 b1 b0</span><br><span class="line">        ::= x67                         #0.0</span><br><span class="line">        ::= x68                         #1.0</span><br><span class="line">        ::= x69 b0                      #byteè¡¨ç¤ºçš„double(-128.0 to 127.0)</span><br><span class="line">        ::= x6a b1 b0                   #shortè¡¨ç¤ºçš„double</span><br><span class="line">        ::= x6b b3 b2 b1 b0             #32-bit floatè¡¨ç¤ºçš„double</span><br><span class="line"></span><br><span class="line">        #32-bit æœ‰ç¬¦å·æ•´å‹</span><br><span class="line">int     ::= &apos;I&apos; b3 b2 b1 b0</span><br><span class="line">        ::= [x80-xbf]                   #-x10 to x3f</span><br><span class="line">        ::= [xc0-xcf] b0                #-x800 to x7ff</span><br><span class="line">        ::= [xd0-xd7] b1 b0             #-x40000 to x3ffff</span><br><span class="line"></span><br><span class="line">        # list/vector length</span><br><span class="line">length  ::= &apos;l&apos; b3 b2 b1 b0</span><br><span class="line">        ::= x6e int</span><br><span class="line"></span><br><span class="line">        # list/vector</span><br><span class="line">list    ::= &apos;V&apos; type? length? value* &apos;z&apos;</span><br><span class="line">        ::= &apos;v&apos; int int value*          #ç¬¬ä¸€ä¸ªintè¡¨ç¤ºç±»å‹å¼•ç”¨, ç¬¬äºŒä¸ªintè¡¨ç¤ºé•¿åº¦</span><br><span class="line"></span><br><span class="line">        #64-bitæœ‰ç¬¦å·long</span><br><span class="line">long    ::= &apos;L&apos; b7 b6 b5 b4 b3 b2 b1 0</span><br><span class="line">        ::= [xd8-xef]                   #-x08 to x0f</span><br><span class="line">        ::= [xf0-xff] b0                #-x800 to x7ff</span><br><span class="line">        ::= [x38-x3f] b1 b0             #-x40000 to x3ffff</span><br><span class="line">        ::= x77 b3 b2 b1 b0             #32-bit æ•´å‹è¡¨ç¤ºçš„long</span><br><span class="line"></span><br><span class="line">        #map/object</span><br><span class="line">map     ::= &apos;M&apos; type? (value value)* &apos;z&apos;    #key, value map pairs</span><br><span class="line"></span><br><span class="line">        # null value</span><br><span class="line">null    ::= &apos;N&apos;</span><br><span class="line"></span><br><span class="line">        #å¯¹è±¡å®ä¾‹</span><br><span class="line">object  ::= &apos;o&apos; int value*</span><br><span class="line"></span><br><span class="line">        #å€¼å¼•ç”¨</span><br><span class="line">ref     ::= &apos;R&apos; b3 b2 b1 b0 # å¯¹æµä¸­ç¬¬nä¸ªmap/list/objectçš„å¼•ç”¨</span><br><span class="line"></span><br><span class="line">        ::= x4a b0          # å¯¹map/list/objectçš„å¼•ç”¨ï¼ŒèŒƒå›´ä¸º1-255th</span><br><span class="line">        ::= x4b b1 b0       # å¯¹map/list/object çš„å¼•ç”¨ï¼ŒèŒƒå›´ä¸º1-65535th</span><br><span class="line"></span><br><span class="line">        #UTF-8 ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œåˆ†å‰²æˆ64kå¤§å°çš„chunks</span><br><span class="line">string  ::= &apos;s&apos; b1 b0 &lt;utf8-data&gt; string    #éæœ«å°¾chunk</span><br><span class="line">        ::= &apos;S&apos; b1 b0 &lt;utf8-data&gt;           #é•¿åº¦èŒƒå›´ä¸º(0-65535)çš„å­—ç¬¦ä¸²</span><br><span class="line">        ::=[x00-x1f] &lt;utf8-data&gt;            #é•¿åº¦èŒƒå›´ä¸º(0-31) çš„å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">        #map/list çš„ç±»å‹ï¼ˆé’ˆå¯¹é¢å‘å¯¹è±¡è¯­è¨€)</span><br><span class="line">type    ::= &apos;t&apos; b1 b0 &lt;type-string&gt;     #ç±»å‹åç§°</span><br><span class="line">        ::= x75 int                     #ç±»å‹å¼•ç”¨å€¼ï¼ˆç”¨æ•´æ•°è¡¨ç¤ºï¼‰</span><br><span class="line"></span><br><span class="line">        #main production</span><br><span class="line">value   ::=null</span><br><span class="line">        ::= binary</span><br><span class="line">        ::= boolean</span><br><span class="line">        ::= date</span><br><span class="line">        ::= double</span><br><span class="line">        ::= int</span><br><span class="line">        ::= list</span><br><span class="line">        ::= long</span><br><span class="line">        ::= map</span><br><span class="line">        ::= class-def value</span><br><span class="line">        ::= ref</span><br><span class="line">        ::= string</span><br></pre></td></tr></table></figure></p>
<h2 id="4-åºåˆ—åŒ–"><a href="#4-åºåˆ—åŒ–" class="headerlink" title="4. åºåˆ—åŒ–"></a>4. åºåˆ—åŒ–</h2><p><code>Hessian</code>çš„å¯¹è±¡åºåˆ—åŒ–æœºåˆ¶åŒ…å«8ç§åŸºæœ¬ç±»å‹:</p>
<ol>
<li>åŸå§‹äºŒè¿›åˆ¶æ•°æ®</li>
<li>boolean</li>
<li>64-bit date</li>
<li>64-bit double</li>
<li>32-bit int</li>
<li>64-bit long</li>
<li>null</li>
<li>UTF8ç¼–ç çš„string</li>
</ol>
<p>å¦å¤–åŒ…æ‹¬3ç§é€’å½’ç±»å‹ï¼š</p>
<ol>
<li>list for lists and arrays</li>
<li>map for maps and dictionaries</li>
<li>object for objects</li>
</ol>
<p>æœ€åï¼Œå®ƒè¿˜åŒ…å«ä¸€ä¸ªç‰¹æ®Šçš„ç±»å‹ï¼š</p>
<ol>
<li>ref ç”¨æ¥è¡¨ç¤ºå¯¹å…±äº«å¯¹è±¡çš„å¼•ç”¨.</li>
</ol>
<p><code>Hessian</code> 2.0æœ‰3ä¸ªå†…éƒ¨çš„å¼•ç”¨è¡¨:</p>
<ol>
<li>ä¸€ä¸ªobject/list å¼•ç”¨è¡¨.</li>
<li>ä¸€ä¸ªç±»å‹å®šä¹‰(class definition)å¼•ç”¨è¡¨.</li>
<li>ä¸€ä¸ªtype(class name)å¼•ç”¨è¡¨.</li>
</ol>
<h3 id="4-1-äºŒè¿›åˆ¶æ•°æ®"><a href="#4-1-äºŒè¿›åˆ¶æ•°æ®" class="headerlink" title="4.1. äºŒè¿›åˆ¶æ•°æ®"></a>4.1. äºŒè¿›åˆ¶æ•°æ®</h3><p>äºŒè¿›åˆ¶æ•°æ®è¯­æ³•
binary  ::= b b1 b0 <binary-data> binary
        ::= B b1 b0 <binary-data>
        ::= [x20-x2f] <binary-data></binary-data></binary-data></binary-data></p>
<p>äºŒè¿›åˆ¶æ•°æ®è¢«åˆ†å‰²æˆchunk. åå…­è¿›åˆ¶æ•°x42(â€˜Bâ€™)æ ‡è¯†æœ€åä¸€ä¸ªchunk,x62(â€˜bâ€™)æ ‡è¯†æ™®é€šçš„chunk.
æ¯ä¸ªchunkæœ‰ä¸€ä¸ª16-bitçš„é•¿åº¦å€¼.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">len = <span class="number">256</span>*b1 + b0</span><br></pre></td></tr></table></figure>
<h4 id="4-1-1-å‹ç¼©æ ¼å¼ï¼šçŸ­äºŒè¿›åˆ¶"><a href="#4-1-1-å‹ç¼©æ ¼å¼ï¼šçŸ­äºŒè¿›åˆ¶" class="headerlink" title="4.1.1. å‹ç¼©æ ¼å¼ï¼šçŸ­äºŒè¿›åˆ¶"></a>4.1.1. å‹ç¼©æ ¼å¼ï¼šçŸ­äºŒè¿›åˆ¶</h4><p>é•¿åº¦å°äº15çš„äºŒè¿›åˆ¶æ•°æ®åªéœ€è¦ç”¨å•ä¸ªåå…­è¿›åˆ¶æ•°å­—æ¥è¡¨ç¤º[x20-x2f].</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">len = code - <span class="number">0x20</span></span><br></pre></td></tr></table></figure>
<h4 id="4-1-2-Binaryå®ä¾‹"><a href="#4-1-2-Binaryå®ä¾‹" class="headerlink" title="4.1.2. Binaryå®ä¾‹"></a>4.1.2. Binaryå®ä¾‹</h4><p>x20             #é›¶é•¿åº¦çš„äºŒè¿›åˆ¶æ•°æ®
x23 x01 x02 x03     #é•¿åº¦ä¸º3çš„æ•°æ®
B x10 x00 â€¦.      #4kå¤§å°çš„final chunk
b x04 x00 â€¦.      #1kå¤§å°çš„non-final chunk</p>
<h3 id="4-2-boolean"><a href="#4-2-boolean" class="headerlink" title="4.2. boolean"></a>4.2. boolean</h3><p>Booleanè¯­æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">boolean  ::= T</span><br><span class="line">         ::= F</span><br></pre></td></tr></table></figure>
<p>ç”¨16è¿›åˆ¶â€™Fâ€™æ¥è¡¨ç¤ºfalse,ç”¨â€™Tâ€™è¡¨ç¤ºtrue.</p>
<h4 id="4-2-1-Booleanå®ä¾‹"><a href="#4-2-1-Booleanå®ä¾‹" class="headerlink" title="4.2.1. Booleanå®ä¾‹"></a>4.2.1. Booleanå®ä¾‹</h4><p>T # true
F # false</p>
<h3 id="4-3-date"><a href="#4-3-date" class="headerlink" title="4.3.    date"></a>4.3.    date</h3><p>date ::=d b7 b6 b5 b4 b3 b2 b1 b0</p>
<p>Dateé‡‡ç”¨64-bitæ¥è¡¨ç¤ºè·1970 00:00H, UTCä»¥æ¥ç»è¿‡çš„milliseconds.</p>
<h4 id="4-3-1-Dateå®ä¾‹"><a href="#4-3-1-Dateå®ä¾‹" class="headerlink" title="4.3.1. Dateå®ä¾‹"></a>4.3.1. Dateå®ä¾‹</h4><p>D x00 x00 xd0 x4b x92 x84 xb8   #2:51:31 May 8, 1998 UTC</p>
<h3 id="4-4-double"><a href="#4-4-double" class="headerlink" title="4.4. double"></a>4.4. double</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">double  ::= D b7 b6 b5 b4 b3 b2 b1 b0</span><br><span class="line">        ::= x67</span><br><span class="line">        ::= x68</span><br><span class="line">        ::= x69 b0</span><br><span class="line">        ::= x6a b1 b0</span><br><span class="line">        ::= x6b b3 b2 b1 b0</span><br></pre></td></tr></table></figure>
<p>ç¬¦åˆIEEEæ ‡å‡†çš„ 64-bitæµ®ç‚¹æ•°.</p>
<h4 id="4-4-1-å‹ç¼©æ ¼å¼ï¼šdoubleè¡¨ç¤ºçš„0"><a href="#4-4-1-å‹ç¼©æ ¼å¼ï¼šdoubleè¡¨ç¤ºçš„0" class="headerlink" title="4.4.1. å‹ç¼©æ ¼å¼ï¼šdoubleè¡¨ç¤ºçš„0"></a>4.4.1. å‹ç¼©æ ¼å¼ï¼šdoubleè¡¨ç¤ºçš„0</h4><p>0.0ç”¨åå…­è¿›åˆ¶x67æ¥è¡¨ç¤º  ï¼ˆå¯¹åº”asciiä¸­å­—ç¬¦gçš„asciiå€¼ï¼‰</p>
<h4 id="4-4-2-å‹ç¼©æ ¼å¼ï¼šdouble-è¡¨ç¤ºçš„1"><a href="#4-4-2-å‹ç¼©æ ¼å¼ï¼šdouble-è¡¨ç¤ºçš„1" class="headerlink" title="4.4.2. å‹ç¼©æ ¼å¼ï¼šdouble è¡¨ç¤ºçš„1"></a>4.4.2. å‹ç¼©æ ¼å¼ï¼šdouble è¡¨ç¤ºçš„1</h4><p>1.0ç”¨åå…­è¿›åˆ¶x68æ¥è¡¨ç¤º</p>
<h4 id="4-4-3-å‹ç¼©æ ¼å¼ï¼šå•å­—èŠ‚double"><a href="#4-4-3-å‹ç¼©æ ¼å¼ï¼šå•å­—èŠ‚double" class="headerlink" title="4.4.3. å‹ç¼©æ ¼å¼ï¼šå•å­—èŠ‚double"></a>4.4.3. å‹ç¼©æ ¼å¼ï¼šå•å­—èŠ‚double</h4><p>ä»‹äº-128.0å’Œ127.0ä¹‹é—´çš„æ— å°æ•°ä½çš„doubleå‹å¯ä»¥ç”¨ä¸¤ä¸ªåå…­è¿›åˆ¶æ¥è¡¨ç¤º(å¦‚x3bè¡¨ç¤ºçš„),ä¹Ÿå³ç›¸å½“äºä¸€ä¸ªbyteå€¼è½¬æ¢æˆdouble:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value = (<span class="keyword">double</span>)b0</span><br></pre></td></tr></table></figure>
<h4 id="4-4-4-å‹ç¼©æ ¼å¼ï¼šshortå‹double"><a href="#4-4-4-å‹ç¼©æ ¼å¼ï¼šshortå‹double" class="headerlink" title="4.4.4. å‹ç¼©æ ¼å¼ï¼šshortå‹double"></a>4.4.4. å‹ç¼©æ ¼å¼ï¼šshortå‹double</h4><p>ä»‹äº-32768.0å’Œ32767.0ä¹‹é—´çš„æ— å°æ•°ä½çš„doubleå‹å¯ä»¥ç”¨3ä¸ªåå…­è¿›åˆ¶æ•°æ¥è¡¨ç¤ºï¼Œä¹Ÿå³ç›¸å½“äºä¸€ä¸ªshortå€¼è½¬æ¢æˆdouble:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value=(<span class="keyword">double</span>)(<span class="number">256</span>*b1 + b0)</span><br></pre></td></tr></table></figure>
<h4 id="4-4-5-floatå‹double"><a href="#4-4-5-floatå‹double" class="headerlink" title="4.4.5. floatå‹double"></a>4.4.5. floatå‹double</h4><p>å’Œ32-bit floatå‹ç­‰ä»·çš„doubleèƒ½å¤Ÿç”¨4ä¸ªåå…­è¿›åˆ¶çš„ floatæ¥è¡¨ç¤º.</p>
<h4 id="4-4-6-Doubleå®ä¾‹"><a href="#4-4-6-Doubleå®ä¾‹" class="headerlink" title="4.4.6. Doubleå®ä¾‹"></a>4.4.6. Doubleå®ä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">x67             # 0.0</span><br><span class="line">x68             # 1.0</span><br><span class="line"></span><br><span class="line">x69 x00         # 0.0</span><br><span class="line">x69 x80         # -128.0</span><br><span class="line">x69 xff         # 127.0</span><br><span class="line"></span><br><span class="line">x70 x00 x00     # 0.0</span><br><span class="line">x70 x80 x00     # -32768.0</span><br><span class="line">x70 xff xff         # 32767.0</span><br><span class="line"></span><br><span class="line">D x40 x28 x80 x00 x00 x00 x00 x00       # 12.25</span><br></pre></td></tr></table></figure>
<h3 id="4-5-int"><a href="#4-5-int" class="headerlink" title="4.5. int"></a>4.5. int</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">int ::= â€™Iâ€™ b3 b2 b1 b0</span><br><span class="line">    ::= [x80-xbf]</span><br><span class="line">    ::= [xc0-xcf]   b0</span><br><span class="line">    ::= [xd0-xd7] b1 b0</span><br></pre></td></tr></table></figure>
<p>32-bitçš„æœ‰ç¬¦å·æ•´å‹. ä¸€ä¸ªæ•´å‹ç”±è·Ÿéšåœ¨x49(â€˜Iâ€™)ä¹‹åçš„4ä¸ªå¤§ç«¯åº(big-endian)æ’ä½çš„åå…­è¿›åˆ¶æ•°æ¥è¡¨ç¤ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value = (b3&lt;&lt;<span class="number">24</span>) + (b2&lt;&lt;<span class="number">16</span>) + (b1&lt;&lt;<span class="number">8</span>)  + b0;</span><br></pre></td></tr></table></figure>
<h4 id="4-5-1-å•å­—èŠ‚æ•´å‹"><a href="#4-5-1-å•å­—èŠ‚æ•´å‹" class="headerlink" title="4.5.1. å•å­—èŠ‚æ•´å‹"></a>4.5.1. å•å­—èŠ‚æ•´å‹</h4><p>ä»‹äº-16å’Œ47ä¹‹é—´çš„æ•´å‹å¯ä»¥ç”¨å•ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œç”¨åå…­è¿›åˆ¶æ¥è¡¨ç¤ºèŒƒå›´ä¸ºx80åˆ°xbf.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value = code â€“ 0x90     # è¿™é‡Œæ˜¯0x90, å¦‚æœcode=x80ï¼Œåˆ™value = x80 â€“ x90 = -16.:-)</span><br></pre></td></tr></table></figure>
<h4 id="4-5-2-åŒå­—èŠ‚æ•´å‹"><a href="#4-5-2-åŒå­—èŠ‚æ•´å‹" class="headerlink" title="4.5.2. åŒå­—èŠ‚æ•´å‹"></a>4.5.2. åŒå­—èŠ‚æ•´å‹</h4><p>ä»‹äº-2048å’Œ2047ä¹‹é—´çš„æ•´å‹å¯ä»¥ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œå¤´å­—èŠ‚çš„èŒƒå›´ä»xc0åˆ°xcf.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value = ((code â€“ <span class="number">0xc8</span>)&lt;&lt;<span class="number">8</span>) + b0;</span><br></pre></td></tr></table></figure>
<h4 id="4-5-3-ä¸‰å­—èŠ‚æ•´å‹"><a href="#4-5-3-ä¸‰å­—èŠ‚æ•´å‹" class="headerlink" title="4.5.3. ä¸‰å­—èŠ‚æ•´å‹"></a>4.5.3. ä¸‰å­—èŠ‚æ•´å‹</h4><p>ä»‹äº- 262144å’Œ262143ä¹‹é—´çš„æ•´å‹å¯ä»¥ç”¨ä¸‰ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œå¤´å­—èŠ‚çš„èŒƒå›´ä»xd0åˆ°xd7.</p>
<h4 id="4-5-4-æ•´å‹å®ä¾‹"><a href="#4-5-4-æ•´å‹å®ä¾‹" class="headerlink" title="4.5.4. æ•´å‹å®ä¾‹"></a>4.5.4. æ•´å‹å®ä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">x90                 # 0</span><br><span class="line">x80                 # -16</span><br><span class="line">xbf                 # 47</span><br><span class="line"></span><br><span class="line">xc8 x00             # 0</span><br><span class="line">xc0 x00             # -2048</span><br><span class="line">xc7 x00             # -256</span><br><span class="line">xcf xff             # 2047</span><br><span class="line"></span><br><span class="line">xd4 x00 x00         # 0</span><br><span class="line">xd0 x00 x00         # -262144</span><br><span class="line">xd7 xff xff         # 262143</span><br><span class="line"></span><br><span class="line">I x00 x00 x00 x00   # 0</span><br><span class="line">I x00 x00 x01 x2c   # 300</span><br></pre></td></tr></table></figure>
<h3 id="4-6-list"><a href="#4-6-list" class="headerlink" title="4.6. list"></a>4.6. list</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list    ::= V type? length? value* z</span><br><span class="line">        ::= V int int value*</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªæœ‰åºåˆ—è¡¨.æ¯ä¸ªlistéƒ½åŒ…å«ä¸€ä¸ªtypeå­—ç¬¦ä¸²ï¼Œé•¿åº¦lengthå’Œä¸€ä¸ªå€¼åˆ—è¡¨ï¼Œä»¥åå…­è¿›åˆ¶x7a(â€˜zâ€™)ä½œä¸ºç»“å°¾ã€‚Typeå¯ä»¥æ˜¯ä»»æ„çš„UTF-8ç¼–ç çš„å­—ç¬¦ä¸²ã€‚LengthæŒ‡å®šäº†listå€¼åˆ—è¡¨çš„é•¿åº¦ã€‚</p>
<p>listçš„æ¯ä¸ªå€¼éƒ½è¢«æ·»åŠ åˆ°ä¸€ä¸ªå¼•ç”¨åˆ—è¡¨ä¸­ï¼Œè¿™æ ·ï¼Œæ‰€æœ‰listä¸­çš„ç›¸åŒæ¡ç›®éƒ½å…±äº«åŒä¸€ä»½å¼•ç”¨ä»¥èŠ‚çœç©ºé—´ã€‚</p>
<blockquote>
<p>Any parser expecting a list must also accept a null or a shared ref.</p>
</blockquote>
<p>Typeçš„æœ‰æ•ˆå–å€¼åœ¨æ–‡æ¡£ä¸­å¹¶æ²¡æœ‰è¯¦ç»†æŒ‡å®šï¼Œè¿™ä¾èµ–äºç‰¹å®šçš„åº”ç”¨. æ¯”å¦‚ï¼Œ åœ¨ä¸€ä¸ªç”±é™æ€ç±»å‹è¯­è¨€å®ç°çš„serveræ‰€æš´éœ²çš„<code>Hessian</code>æ¥å£å¯ä»¥ä½¿ç”¨ç±»å‹ä¿¡æ¯æ¥å®ä¾‹åŒ–ç‰¹å®šçš„æ•°ç»„ç±»å‹ï¼Œåä¹‹ï¼Œåœ¨ä¸€ä¸ªç”±åŠ¨æ€ç±»å‹è¯­è¨€(e.g.: python)å®ç°çš„serverä¸­ï¼Œå°†ä¼šå¿½ç•¥ç±»å‹ä¿¡æ¯ã€‚</p>
<h4 id="4-6-1-å‹ç¼©æ ¼å¼-repeated-list"><a href="#4-6-1-å‹ç¼©æ ¼å¼-repeated-list" class="headerlink" title="4.6.1. å‹ç¼©æ ¼å¼: repeated list"></a>4.6.1. å‹ç¼©æ ¼å¼: repeated list</h4><p><code>Hessian</code>2.0 åˆ¶å®šäº†ä¸€ä¸ªæ ¼å¼ç´§å‡‘çš„listï¼Œå…¶ä¸­listå…ƒç´ ç±»å‹typeå’Œå…ƒç´ ä¸ªæ•°lengthéƒ½ç”¨æ•´å‹æ¥ç¼–ç ï¼Œå…¶ä¸­ç±»å‹typeæ˜¯å¯¹å…ˆå‰å®šä¹‰çš„åŸå§‹æ•°æ®ç±»å‹çš„å¼•ç”¨ã€‚</p>
<h4 id="4-6-2-Listå®ä¾‹"><a href="#4-6-2-Listå®ä¾‹" class="headerlink" title="4.6.2. Listå®ä¾‹"></a>4.6.2. Listå®ä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">å¼ºç±»å‹intæ•°ç»„çš„åºåˆ—åŒ–: int[] = &#123;0, 1&#125;</span><br><span class="line"></span><br><span class="line">V</span><br><span class="line">    t x00 x04 [int  # int[] ç±»å‹çš„ç¼–ç </span><br><span class="line">    x6e x02         # length = 2</span><br><span class="line">    x90             # æ•´æ•° 0</span><br><span class="line">    x91             # æ•´æ•° 1</span><br><span class="line">    z</span><br><span class="line"></span><br><span class="line">åŒ¿åå˜é•¿list = &#123;0, &quot;foobar&quot;&#125;</span><br><span class="line">V</span><br><span class="line">    t x00 x04 [int      # int[] ç±»å‹ç¼–ç </span><br><span class="line">    x6e x02             # length = 2</span><br><span class="line">    x90                 # æ•´æ•°0</span><br><span class="line">    x91                 # æ•´æ•°1</span><br><span class="line">    z</span><br><span class="line"></span><br><span class="line">Repeated listç±»å‹</span><br><span class="line"></span><br><span class="line">V</span><br><span class="line">    t x00 x04 [int      # int[]ç±»å‹ç¼–ç </span><br><span class="line">    x63 x02             # length=2</span><br><span class="line">    x90                 # æ•´æ•° 0</span><br><span class="line">    x91                 # æ•´æ•° 1</span><br><span class="line">    z</span><br><span class="line"></span><br><span class="line">V</span><br><span class="line">    x91             # int[]çš„ç±»å‹å¼•ç”¨    (integer #1)</span><br><span class="line">    x92             # length = 2</span><br><span class="line">    x92             # æ•´æ•°2</span><br><span class="line">    x93             # æ•´æ•°3</span><br></pre></td></tr></table></figure>
<h3 id="4-7-long"><a href="#4-7-long" class="headerlink" title="4.7. long"></a>4.7. long</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">long    ::= L b7 b6 b5 b4 b3 b2 b1 b0</span><br><span class="line">        ::= [xd8-xef]</span><br><span class="line">        ::= [xf0-xff] b0</span><br><span class="line">        ::= [x38-x3f] b1 b0</span><br><span class="line">        ::= x77 b3 b2 b1 b0</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ª64-bitçš„æœ‰ç¬¦å·æ•´æ•°. èµ·å¤´ç”±åå…­è¿›åˆ¶x4c(â€˜Lâ€™)æ ‡è¯†, åé¢ä¸º8å­—èŠ‚çš„å¤§ç«¯ï¼ˆbig-endianï¼‰åºçš„æ•´æ•°ã€‚</p>
<h4 id="4-7-1-å‹ç¼©æ ¼å¼-å•å­—èŠ‚long"><a href="#4-7-1-å‹ç¼©æ ¼å¼-å•å­—èŠ‚long" class="headerlink" title="4.7.1. å‹ç¼©æ ¼å¼: å•å­—èŠ‚long"></a>4.7.1. å‹ç¼©æ ¼å¼: å•å­—èŠ‚long</h4><p>ä»‹äº-8å’Œ15ä¹‹é—´çš„longç”±å•ä¸ªå­—èŠ‚è¡¨ç¤ºï¼ŒèŒƒå›´ä¸ºxd8åˆ°xef.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value = (code â€“ <span class="number">0xe0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="4-7-2-å‹ç¼©æ ¼å¼-åŒå­—èŠ‚long"><a href="#4-7-2-å‹ç¼©æ ¼å¼-åŒå­—èŠ‚long" class="headerlink" title="4.7.2. å‹ç¼©æ ¼å¼: åŒå­—èŠ‚long"></a>4.7.2. å‹ç¼©æ ¼å¼: åŒå­—èŠ‚long</h4><p>ä»‹äº-2048å’Œ2047ä¹‹é—´çš„longç”±ä¸¤ä¸ªå­—èŠ‚æ ‡è¯†, èµ·å¤´å­—èŠ‚çš„å–å€¼èŒƒå›´ä¸ºxf0åˆ°xff.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value = ((code â€“ <span class="number">0xf8</span>)&lt;&lt;<span class="number">8</span>) + b0</span><br></pre></td></tr></table></figure>
<h4 id="4-7-3-å‹ç¼©æ ¼å¼-3å­—èŠ‚long"><a href="#4-7-3-å‹ç¼©æ ¼å¼-3å­—èŠ‚long" class="headerlink" title="4.7.3. å‹ç¼©æ ¼å¼: 3å­—èŠ‚long"></a>4.7.3. å‹ç¼©æ ¼å¼: 3å­—èŠ‚long</h4><p>ä»‹äº-262144å’Œ262143ä¹‹é—´çš„longç”±3ä¸ªå­—èŠ‚ç¼–ç ï¼Œèµ·å¤´å­—èŠ‚çš„å–å€¼èŒƒå›´ä¸ºx38åˆ°x3f.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value = ((code â€“ <span class="number">0x3c</span>)&lt;&lt;<span class="number">16</span>) + (b1&lt;&lt;<span class="number">8</span>) + b0</span><br></pre></td></tr></table></figure>
<h4 id="4-7-4-å‹ç¼©æ ¼å¼-å››å­—èŠ‚long"><a href="#4-7-4-å‹ç¼©æ ¼å¼-å››å­—èŠ‚long" class="headerlink" title="4.7.4. å‹ç¼©æ ¼å¼: å››å­—èŠ‚long"></a>4.7.4. å‹ç¼©æ ¼å¼: å››å­—èŠ‚long</h4><p>å¯ä»¥ç”¨32-bitçš„æ•´æ•°æ¥æ ‡è¯†çš„longåœ¨è¿™é‡Œéœ€è¦ç”¨5ä¸ªå­—èŠ‚ä½œç¼–ç ,èµ·å¤´å­—èŠ‚ç”±x77æ ‡è¯†.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value = (b3&lt;&lt;<span class="number">24</span>) + (b2&lt;&lt;<span class="number">16</span>) + (b1&lt;&lt;<span class="number">8</span>) + b0</span><br></pre></td></tr></table></figure>
<h4 id="4-7-5-longå®ä¾‹"><a href="#4-7-5-longå®ä¾‹" class="headerlink" title="4.7.5. longå®ä¾‹"></a>4.7.5. longå®ä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">xe0                                 # 0</span><br><span class="line">xd8                                 # -8</span><br><span class="line">xef                                 # 15</span><br><span class="line"></span><br><span class="line">xf8 x00                             # 0</span><br><span class="line">xf0 x00                             # -2048</span><br><span class="line">xf7 x00                             # -256</span><br><span class="line">xff xff                             # 2047</span><br><span class="line"></span><br><span class="line">x3c x00 x00                         # 0</span><br><span class="line">x38 x00 x00                         # -262144</span><br><span class="line">x3f xff xff                         # 262143</span><br><span class="line"></span><br><span class="line">x77 x00 x00 x00 x00                 # 0</span><br><span class="line">x77 x00 x00 x01 x2c                 # 300</span><br><span class="line"></span><br><span class="line">L x00 x00 x00 x00 x00 x00 x01 x2c   # 300</span><br></pre></td></tr></table></figure>
<h3 id="4-8-map"><a href="#4-8-map" class="headerlink" title="4.8.    map"></a>4.8.    map</h3><p>map ::= M type? (value value)* z</p>
<p>ç”¨æ¥è¡¨ç¤ºåºåˆ—åŒ–mapå’Œå¯¹è±¡. Typeå­—æ®µç”¨æ¥è¡¨ç¤ºmapç±»å‹ï¼Œtypeå¯èƒ½ä¸ºç©ºï¼ˆä¾‹å¦‚åœ¨lengthä¸º0çš„æƒ…å†µä¸‹ï¼‰ã€‚å¦‚æœç±»å‹æœªæŒ‡å®šï¼Œåˆ™ç”±è§£æå™¨æ¥è´Ÿè´£é€‰æ‹©ç±»å‹ã€‚å¯¹äºå¯¹è±¡è€Œè¨€,ä¸è¯†åˆ«çš„keyå°†ä¼šè¢«å¿½ç•¥.
æ‰€æœ‰mapå…ƒç´ ä¹Ÿè¢«å­˜å…¥ä¸€ä¸ªå¼•ç”¨åˆ—è¡¨. åœ¨è§£æmapæ—¶ï¼Œå¯ä»¥åŒæ—¶æ”¯æŒç©ºç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚
ç±»å‹ç”±æœåŠ¡å…·ä½“æ¥è¿›è¡Œé€‰æ‹©ã€‚</p>
<h4 id="4-8-1-Mapå®ä¾‹"><a href="#4-8-1-Mapå®ä¾‹" class="headerlink" title="4.8.1. Mapå®ä¾‹"></a>4.8.1. Mapå®ä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Map map = <span class="keyword">new</span> HashMap();</span><br><span class="line">map.put(<span class="keyword">new</span> Integer(<span class="number">1</span>), <span class="string">"fee"</span>);</span><br><span class="line">map.put(<span class="keyword">new</span> Integer(<span class="number">16</span>), <span class="string">"fie"</span>);</span><br><span class="line">map.put(<span class="keyword">new</span> Integer(<span class="number">256</span>), <span class="string">"foe"</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">M</span><br><span class="line">    x91         # 1</span><br><span class="line">    x03 fee     # &quot;fee&quot;</span><br><span class="line"></span><br><span class="line">    xa0         # 16</span><br><span class="line">    x03 fie     # &quot;fie&quot;</span><br><span class="line"></span><br><span class="line">    xb9 x00     # 256</span><br><span class="line">    x03 foe     # &quot;foe&quot;</span><br><span class="line">    z</span><br></pre></td></tr></table></figure>
<p>ç”±javaå¯¹è±¡è¡¨ç¤ºçš„Mapå¯¹è±¡:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Public <span class="class"><span class="keyword">class</span> <span class="title">Car</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    String color = <span class="string">"aquamarine"</span></span><br><span class="line">    String model = <span class="string">"Beetle"</span>;</span><br><span class="line">    Int mileage = <span class="number">65536</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">M</span><br><span class="line">    t x00 x13 com.caucho.test.Car   #type</span><br><span class="line">    x05 color                       # color field</span><br><span class="line">    x0a aquamarine</span><br><span class="line"></span><br><span class="line">    x05 model                   # model field</span><br><span class="line">    x06 Beetle</span><br><span class="line"></span><br><span class="line">    x07 mileage                 #mileage field</span><br><span class="line">    I x00 x01 x00 x00</span><br><span class="line">    z</span><br></pre></td></tr></table></figure>
<h3 id="4-9-null"><a href="#4-9-null" class="headerlink" title="4.9. null"></a>4.9. null</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">null    ::= N</span><br></pre></td></tr></table></figure>
<p>nullè¡¨ç¤ºä¸€ä¸ªç©ºæŒ‡é’ˆã€‚å­—ç¬¦â€™Nâ€™ç”¨æ¥æ ‡è¯†nullå€¼ã€‚</p>
<h3 id="4-10-å¯¹è±¡-object"><a href="#4-10-å¯¹è±¡-object" class="headerlink" title="4.10. å¯¹è±¡(object)"></a>4.10. å¯¹è±¡(object)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">object      ::= â€˜oâ€™ int value*</span><br><span class="line">class-def   ::= â€™Oâ€™ type int string*</span><br></pre></td></tr></table></figure>
<h4 id="4-10-1-å‹ç¼©æ ¼å¼-classå®šä¹‰"><a href="#4-10-1-å‹ç¼©æ ¼å¼-classå®šä¹‰" class="headerlink" title="4.10.1. å‹ç¼©æ ¼å¼: classå®šä¹‰"></a>4.10.1. å‹ç¼©æ ¼å¼: classå®šä¹‰</h4><p><code>Hessian</code> 2.0åˆ¶å®šäº†ä¸€ä¸ªç´§å‡‘çš„å¯¹è±¡æ ¼å¼ï¼Œå…¶ä¸­å­—æ®µååªéœ€è¦åºåˆ—åŒ–ä¸€æ¬¡ã€‚å¯¹äºå¯¹è±¡è€Œè¨€ï¼Œä»…éœ€è¦æŒ‰æ¬¡åºåœ°åºåˆ—åŒ–è¿™äº›å­—æ®µçš„å–å€¼.</p>
<p>ç±»å®šä¹‰åŒ…æ‹¬ç±»å‹å­—ç¬¦ä¸²,å­—æ®µä¸ªæ•°,æ‰€æœ‰çš„å­—æ®µå. ç±»å®šä¹‰è¢«å­˜æ”¾åœ¨ä¸€ä¸ªå¯¹è±¡å®šä¹‰è¡¨ä¸­,æ¯ä¸ªç±»å®šä¹‰ç”±ä¸€ä¸ªå”¯ä¸€æ•´æ•°ä½œä¸ºkeyæ ‡è¯†ï¼Œä¹‹åè¢«å¯¹è±¡å®ä¾‹é€šè¿‡keyæ¥å¼•ç”¨ã€‚</p>
<h4 id="4-10-2-å‹ç¼©æ ¼å¼-å¯¹è±¡å®ä¾‹"><a href="#4-10-2-å‹ç¼©æ ¼å¼-å¯¹è±¡å®ä¾‹" class="headerlink" title="4.10.2. å‹ç¼©æ ¼å¼: å¯¹è±¡å®ä¾‹"></a>4.10.2. å‹ç¼©æ ¼å¼: å¯¹è±¡å®ä¾‹</h4><p>å¯¹è±¡å®ä¾‹åŸºäºå…ˆå‰å®šä¹‰æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹. ç±»å®šä¹‰é€šè¿‡ä¸€ä¸ªæ•´å‹keyåœ¨ç±»å®šä¹‰è¡¨ä¸­è¿›è¡ŒæŸ¥è¯¢ã€‚</p>
<h4 id="4-10-3-å¯¹è±¡å®ä¾‹"><a href="#4-10-3-å¯¹è±¡å®ä¾‹" class="headerlink" title="4.10.3. å¯¹è±¡å®ä¾‹"></a>4.10.3. å¯¹è±¡å®ä¾‹</h4><p>å¯¹è±¡åºåˆ—åŒ–</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Class Car&#123;</span><br><span class="line">    String color;</span><br><span class="line">    String model;</span><br><span class="line">&#125;</span><br><span class="line">out.wirteObject(<span class="keyword">new</span> Car(<span class="string">"red"</span>, <span class="string">"corvette"</span>));</span><br><span class="line">out.writeObject(<span class="keyword">new</span> Car(<span class="string">"green"</span>, <span class="string">"civic"</span>));</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">O                           # ç±»å‹å®šä¹‰  (å‡å®šåœ¨ç±»å‹è¡¨ä¸­å¯¹åº”keyä¸º 0)</span><br><span class="line">    t x00 x0b example.Car   # ç±»å‹ä¸ºexample.Car</span><br><span class="line">    x92                     # ä¸¤ä¸ªå­—æ®µ</span><br><span class="line">    x05 color               # colorå­—æ®µå</span><br><span class="line">    x05 model               # modelå­—æ®µå</span><br><span class="line"></span><br><span class="line">o</span><br><span class="line">    x90                     # å¯¹è±¡å®šä¹‰ (ç±»å‹å¼•ç”¨key=0)</span><br><span class="line">    x03 red                 # colorå­—æ®µå–å€¼</span><br><span class="line">    x08 corvette            # modelå­—æ®µå–å€¼</span><br><span class="line"></span><br><span class="line">o</span><br><span class="line">    x90                     # å¯¹è±¡å®šä¹‰ (ç±»å‹å¼•ç”¨key=0)</span><br><span class="line">    x05 green               # colorå­—æ®µå–å€¼</span><br><span class="line">    x05 civic               # modelå­—æ®µå–å€¼</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color&#123;</span><br><span class="line">    RED,</span><br><span class="line">    GREEN,</span><br><span class="line">    BLUE</span><br><span class="line">&#125;</span><br><span class="line">out.writeObject(Color.RED);</span><br><span class="line">out.writeObject(Color.GREEN);</span><br><span class="line">out.writeObject(Color.BLUE);</span><br><span class="line">out.writeObject(Color.GREEN);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">O                               # ç±»å‹å®šä¹‰ (å‡å®šåœ¨ç±»å‹è¡¨ä¸­å¯¹åº”keyä¸º 0)</span><br><span class="line">    t x00 x0b example.Color     # ç±»å‹ä¸ºexample.Color</span><br><span class="line">    x91                         # ä¸€ä¸ªå­—æ®µ</span><br><span class="line">    x04 name                    # æšä¸¾å­—æ®µä¸º&quot;name&quot;</span><br><span class="line"></span><br><span class="line">o                               # å¯¹è±¡ #0</span><br><span class="line">    x90                         # å¯¹è±¡å®šä¹‰ (ç±»å‹å¼•ç”¨key=0)</span><br><span class="line">    x03 RED                     # RED</span><br><span class="line"></span><br><span class="line">o                               # å¯¹è±¡ #1</span><br><span class="line">    x90                         # å¯¹è±¡å®šä¹‰ (ç±»å‹å¼•ç”¨key=0)</span><br><span class="line">    x05 GREEN                   # GREEN</span><br><span class="line"></span><br><span class="line">o                               # å¯¹è±¡ #2</span><br><span class="line">    x90                         # å¯¹è±¡å®šä¹‰ (ç±»å‹å¼•ç”¨key=0)</span><br><span class="line">    x05 BLUE                    # BLUE</span><br><span class="line"></span><br><span class="line">x4a x01                         # å¯¹è±¡å¼•ç”¨ #1</span><br></pre></td></tr></table></figure>
<h3 id="4-11-å¼•ç”¨-ref"><a href="#4-11-å¼•ç”¨-ref" class="headerlink" title="4.11. å¼•ç”¨(ref)"></a>4.11. å¼•ç”¨(ref)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ref ::= R b3 b2 b1 b0</span><br><span class="line">    ::= x4a b0</span><br><span class="line">    ::= x4b b1 b0</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸€ä¸ªæ•´æ•°ä½œä¸ºkey,å¼•ç”¨ä¹‹å‰æ‰€å®šä¹‰çš„list, mapæˆ–è€…å¯¹è±¡å®ä¾‹. å¯¹äºä»è¾“å…¥æµä¸­è¯»å–å‡ºæ¥çš„æ¯ä¸ªlist, mapæˆ–å¯¹è±¡, éƒ½åœ¨æµä¸­æŒ‰ä½ç½®æ¬¡åºä½œä¸ºæ ‡è¯†, i.e. ç¬¬ä¸€ä¸ªlistæˆ–è€…mapä¸ºâ€™0â€™, ä¸‹ä¸€ä¸ªä¸ºâ€™1â€™ç­‰ç­‰. ä¹‹åçš„å¼•ç”¨èƒ½å¤Ÿä½¿ç”¨å…ˆå‰çš„å¯¹è±¡. Writers MAYç”Ÿæˆå¼•ç”¨. Parsers MUST è¯†åˆ«å¼•ç”¨.</p>
<blockquote>
<p>ref can refer to incompletely-read items. For example, a circular linked-list will refer to the first link before the entire list has been read.</p>
<p>A possible implementation would add each map, list, and object to an array as it is read. The ref will return the corresponding value from the array. To support circular structures, the implementation would store the map, list or object immediately, before filling in the contents.</p>
<p>Each map or list is stored into an array as it is parsed. ref selects one of the stored objects. The first object is numbered â€˜0â€™.</p>
</blockquote>
<h4 id="4-11-1-å‹ç¼©æ ¼å¼-åŒå­—èŠ‚å¼•ç”¨"><a href="#4-11-1-å‹ç¼©æ ¼å¼-åŒå­—èŠ‚å¼•ç”¨" class="headerlink" title="4.11.1. å‹ç¼©æ ¼å¼: åŒå­—èŠ‚å¼•ç”¨"></a>4.11.1. å‹ç¼©æ ¼å¼: åŒå­—èŠ‚å¼•ç”¨</h4><p>ä»‹äº0å’Œ255ä¹‹é—´çš„å¼•ç”¨ç¼–å·å¯ä»¥ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥ç¼–ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value = b0</span><br></pre></td></tr></table></figure>
<h4 id="4-11-2-å‹ç¼©æ ¼å¼-ä¸‰å­—èŠ‚å¼•ç”¨"><a href="#4-11-2-å‹ç¼©æ ¼å¼-ä¸‰å­—èŠ‚å¼•ç”¨" class="headerlink" title="4.11.2. å‹ç¼©æ ¼å¼: ä¸‰å­—èŠ‚å¼•ç”¨"></a>4.11.2. å‹ç¼©æ ¼å¼: ä¸‰å­—èŠ‚å¼•ç”¨</h4><p>ä»‹äº0å’Œ255ä¹‹é—´çš„å¼•ç”¨ç¼–å·å¯ä»¥ç”¨ä¸‰ä¸ªå­—èŠ‚æ¥ç¼–ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value = (b1&lt;&lt;<span class="number">8</span>) + b0</span><br></pre></td></tr></table></figure>
<h4 id="4-11-3-å¼•ç”¨å®ä¾‹"><a href="#4-11-3-å¼•ç”¨å®ä¾‹" class="headerlink" title="4.11.3. å¼•ç”¨å®ä¾‹"></a>4.11.3. å¼•ç”¨å®ä¾‹</h4><p>å¾ªç¯é“¾è¡¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list = <span class="keyword">new</span> LinkedList();</span><br><span class="line">list.data = <span class="number">1</span>;</span><br><span class="line">list.tail = list;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">O</span><br><span class="line">    X9a LinkedList      # ç±»å‹å®šä¹‰ (å‡å®šåœ¨ç±»å‹è¡¨ä¸­å¯¹åº”keyä¸º 0)</span><br><span class="line">    X92</span><br><span class="line">    X04 head</span><br><span class="line">    X04 tail</span><br><span class="line"></span><br><span class="line">o   x90             # ç±»å¼•ç”¨ #0</span><br><span class="line">    x91             # data = 1</span><br><span class="line">    x4b x00         # ä¸‹ä¸€ä¸ªæ¡ç›®å¼•ç”¨åˆ°è‡ªèº«ï¼Œ ref #0</span><br></pre></td></tr></table></figure>
<h3 id="4-12-string"><a href="#4-12-string" class="headerlink" title="4.12. string"></a>4.12. string</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string  ::= s b1 b0 &lt;utf8-data&gt; string</span><br><span class="line">        ::= s b1 b0 &lt;utf8-data&gt;</span><br><span class="line">        ::= [x00-x1f] &lt;utf8-data&gt;</span><br></pre></td></tr></table></figure>
<p>16-bitå­—ç¬¦ï¼ŒUTF-8ç¼–ç çš„å­—ç¬¦ä¸²ã€‚å­—ç¬¦ä¸²åˆ†å—(chunk)ç¼–ç . x53(â€˜Sâ€™)èµ·å¤´æ¥æ ‡è¯†æœ€åä¸€ä¸ªchunk, x73(â€˜sâ€™)èµ·å¤´æ ‡è¯†éæœ€ç»ˆchunk. æ¯ä¸ªchunkæœ‰ä¸€ä¸ª16-bitçš„é•¿åº¦å€¼å­—æ®µã€‚
lengthç”¨æ¥æ ‡è¯†å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè€Œéå­—èŠ‚æ•°é‡.
String chunks may not split surrogate pairs.</p>
<h4 id="4-12-1-å‹ç¼©æ ¼å¼-çŸ­å­—ç¬¦ä¸²"><a href="#4-12-1-å‹ç¼©æ ¼å¼-çŸ­å­—ç¬¦ä¸²" class="headerlink" title="4.12.1. å‹ç¼©æ ¼å¼: çŸ­å­—ç¬¦ä¸²"></a>4.12.1. å‹ç¼©æ ¼å¼: çŸ­å­—ç¬¦ä¸²</h4><p>é•¿åº¦å°äº32çš„å­—ç¬¦ä¸²å¯ä»¥ç”¨å•å­—èŠ‚é•¿çš„lengthæ¥æ ‡è¯†ï¼ŒèŒƒå›´ä¸º[x00-x1f].</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value = code</span><br></pre></td></tr></table></figure>
<h4 id="4-12-2-å­—ç¬¦ä¸²å®ä¾‹"><a href="#4-12-2-å­—ç¬¦ä¸²å®ä¾‹" class="headerlink" title="4.12.2. å­—ç¬¦ä¸²å®ä¾‹"></a>4.12.2. å­—ç¬¦ä¸²å®ä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x00                 # &quot;&quot;, ç©ºå­—ç¬¦ä¸²</span><br><span class="line">x05 hello           # &quot;hello&quot;</span><br><span class="line">x01 xc3 x83         # &quot;\u00c3&quot;</span><br><span class="line"></span><br><span class="line">S   x00 x05 hello   # é•¿å­—ç¬¦ä¸²æ ¼å¼çš„&quot;hello&quot;</span><br><span class="line">s   x00 x07 hello,  # &quot;hello, world&quot;è¢«åˆ†å‰²æˆä¸¤ä¸ªchunk</span><br><span class="line">    X05 world</span><br></pre></td></tr></table></figure>
<h3 id="4-13-ç±»å‹-type"><a href="#4-13-ç±»å‹-type" class="headerlink" title="4.13. ç±»å‹(type)"></a>4.13. ç±»å‹(type)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">type    ::= â€˜tâ€™ b1 b0 &lt;type-string&gt;</span><br><span class="line">        ::= x4a b0</span><br></pre></td></tr></table></figure>
<p>åœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œä¸€ä¸ªmapæˆ–listå¯èƒ½åŒ…å«ä¸€ä¸ªtypeå±æ€§ä»¥æ ‡è¯†mapæˆ–listçš„ç±»å‹åç§°ã€‚
æ¯ä¸ªtypeéƒ½è¢«åŠ å…¥åˆ°ç±»å‹è¡¨(type map)ä¸­ï¼Œä»¥ä¾›å°†æ¥è¢«å¼•ç”¨ã€‚</p>
<h3 id="4-14-å‹ç¼©æ ¼å¼-ç±»å‹å¼•ç”¨"><a href="#4-14-å‹ç¼©æ ¼å¼-ç±»å‹å¼•ç”¨" class="headerlink" title="4.14. å‹ç¼©æ ¼å¼: ç±»å‹å¼•ç”¨"></a>4.14. å‹ç¼©æ ¼å¼: ç±»å‹å¼•ç”¨</h3><p>Repeated type strings MAY use the type map (type reference) to refer to a previously used type. The type reference is zero-based over all the types encountered during parsing.</p>
<h2 id="5-å¼•ç”¨è¡¨-Reference-Map"><a href="#5-å¼•ç”¨è¡¨-Reference-Map" class="headerlink" title="5. å¼•ç”¨è¡¨(Reference Map)"></a>5. å¼•ç”¨è¡¨(Reference Map)</h2><p><code>Hessian</code> 2.0åŒ…å«3ä¸ªå†…å»ºçš„å¼•ç”¨è¡¨ï¼š</p>
<ol>
<li>ä¸€ä¸ªmap/object/listå¼•ç”¨è¡¨.</li>
<li>ä¸€ä¸ªç±»å‹å®šä¹‰è¡¨(class definition map).</li>
<li>ä¸€ä¸ªtype(class name)è¡¨</li>
</ol>
<p>å€¼å¼•ç”¨è¡¨ä½¿å¾—<code>Hessian</code>æ”¯æŒarbitrary graphsï¼Œè¿˜æœ‰é€’å½’å’Œå¾ªç¯æ•°æ®ç»“æ„ã€‚
classå’Œtypeè¡¨é€šè¿‡æ¶ˆé™¤é‡å¤å­—ç¬¦ä¸²è€Œæé«˜äº†<code>Hessian</code>çš„æ•ˆç‡ã€‚</p>
<h3 id="5-1-å€¼å¼•ç”¨"><a href="#5-1-å€¼å¼•ç”¨" class="headerlink" title="5.1. å€¼å¼•ç”¨"></a>5.1. å€¼å¼•ç”¨</h3><blockquote>
<p><code>Hessian</code> supports arbitrary graphs by adding list (list), object (object), and map (map) as it encounters them in the bytecode streamã€‚</p>
</blockquote>
<p>è§£æå™¨å¿…é¡»åœ¨å¼•ç”¨è¡¨ä¸­å­˜å‚¨æ¯ä¸ªlist, å¯¹è±¡å’Œmapã€‚</p>
<p>è¢«å­˜å‚¨çš„å¯¹è±¡èƒ½å¤Ÿè¢«å¼•ç”¨ã€‚</p>
<h3 id="5-2-classå¼•ç”¨"><a href="#5-2-classå¼•ç”¨" class="headerlink" title="5.2. classå¼•ç”¨"></a>5.2. classå¼•ç”¨</h3><p>æ¯ä¸ªç±»å‹å®šä¹‰è¢«è‡ªåŠ¨æ·»åŠ åˆ°ç±»å‹è¡¨(class-map)ä¸­ã€‚è§£æå™¨å¿…é¡»åœ¨åˆæ¬¡ä½¿ç”¨ä¸€ä¸ªç±»å‹æ—¶æŠŠå®ƒæ·»åŠ åˆ°ç±»å‹è¡¨ä¸­ï¼Œä¹‹åå¯¹è±¡å®ä¾‹å°†é€šè¿‡å¼•ç”¨æ¥è¿½è¸ªè‡ªèº«çš„ç±»å‹ã€‚</p>
<h3 id="5-3-typeå¼•ç”¨"><a href="#5-3-typeå¼•ç”¨" class="headerlink" title="5.3. typeå¼•ç”¨"></a>5.3. typeå¼•ç”¨</h3><p>mapå’Œlistçš„å€¼ç±»å‹å­—ç¬¦ä¸²è¢«å­˜å‚¨åœ¨type mapä¸­ã€‚è§£æå™¨å¿…é¡»åœ¨åˆæ¬¡ç¢°åˆ°ä¸€ä¸ªtypeå­—ç¬¦ä¸²æ—¶æŠŠå®ƒåŠ å…¥åˆ°type mapä¸­ã€‚</p>
<h2 id="6-å­—èŠ‚ç æ˜ å°„è¡¨-Bytecode-map"><a href="#6-å­—èŠ‚ç æ˜ å°„è¡¨-Bytecode-map" class="headerlink" title="6. å­—èŠ‚ç æ˜ å°„è¡¨(Bytecode map)"></a>6. å­—èŠ‚ç æ˜ å°„è¡¨(Bytecode map)</h2><p><code>Hessian</code>è¢«åˆ¶å®šæˆä¸€ä¸ªå­—èŠ‚ç åè®®ã€‚<code>Hessian</code>è§£æå™¨æœ¬è´¨ä¸Šæ˜¯ä¸€æ®µé’ˆå¯¹å¤´å­—èŠ‚çš„é€‰æ‹©åˆ†æ”¯è¯­å¥.</p>
<p>å­—èŠ‚ç¼–ç </p>
<table>
<thead>
<tr>
<th>å€¼èŒƒå›´</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>x00 - x1f</td>
<td>utf-8å­—ç¬¦ä¸²ï¼Œé•¿åº¦èŒƒå›´ 0-32</td>
</tr>
<tr>
<td>x20 - x2f</td>
<td>äºŒè¿›åˆ¶æ•°æ®ï¼Œé•¿åº¦èŒƒå›´ 0-16</td>
</tr>
<tr>
<td>x30 - x37</td>
<td>ä¿ç•™</td>
</tr>
<tr>
<td>x38 - x3f</td>
<td>é•¿æ•´å‹long èŒƒå›´ä»-x40000 åˆ° x3ffff</td>
</tr>
<tr>
<td>x40 - x41</td>
<td>ä¿ç•™</td>
</tr>
<tr>
<td>x42</td>
<td>8-bit äºŒè¿›åˆ¶æ•°æ®ï¼Œè¡¨ç¤ºæœ«å°¾chunk(â€˜Bâ€™)</td>
</tr>
<tr>
<td>x43</td>
<td>ä¿ç•™(â€˜Câ€™ streaming call)</td>
</tr>
<tr>
<td>x44</td>
<td>64-bit IEEE è§„èŒƒç¼–ç çš„åŒç²¾åº¦æµ®ç‚¹double (â€˜Dâ€™)</td>
</tr>
<tr>
<td>x45</td>
<td>ä¿ç•™(â€˜Eâ€™ envelope)</td>
</tr>
<tr>
<td>x46</td>
<td>boolean false (â€˜Fâ€™)</td>
</tr>
<tr>
<td>x47</td>
<td>ä¿ç•™</td>
</tr>
<tr>
<td>x48</td>
<td>ä¿ç•™ (â€˜Hâ€™ header)</td>
</tr>
<tr>
<td>x49</td>
<td>32-bitæœ‰ç¬¦å·æ•´å‹signed integer (â€˜Iâ€™)</td>
</tr>
<tr>
<td>x4a</td>
<td>å¼•ç”¨(ref)ï¼ŒèŒƒå›´ä¸º1-256th</td>
</tr>
<tr>
<td>x4b</td>
<td>å¼•ç”¨(ref)ï¼ŒèŒƒå›´ä¸º1-65536th</td>
</tr>
<tr>
<td>x4c</td>
<td>64-bitæœ‰ç¬¦å·é•¿æ•´å‹long integer (â€˜Lâ€™)</td>
</tr>
<tr>
<td>x4d</td>
<td>å…·æœ‰å¯é€‰ç±»å‹çš„map (â€˜Mâ€™)</td>
</tr>
<tr>
<td>x4e</td>
<td>null (â€˜Nâ€™)</td>
</tr>
<tr>
<td>x4f</td>
<td>ç±»å‹å®šä¹‰(â€˜Oâ€™)</td>
</tr>
<tr>
<td>x50</td>
<td>ä¿ç•™(â€˜Pâ€™ streaming message/post)</td>
</tr>
<tr>
<td>x51</td>
<td>ä¿ç•™</td>
</tr>
<tr>
<td>x52</td>
<td>å¼•ç”¨(ref)ï¼Œå–å€¼èŒƒå›´å¯¹åº”äºæ•´å‹int (â€˜Râ€™)</td>
</tr>
<tr>
<td>x53</td>
<td>utf-8å­—ç¬¦ä¸²ï¼Œæœ«å°¾chunk (â€˜Sâ€™)</td>
</tr>
<tr>
<td>x54</td>
<td>boolean true (â€˜Tâ€™)</td>
</tr>
<tr>
<td>x55</td>
<td>ä¿ç•™</td>
</tr>
<tr>
<td>x56</td>
<td>list/vector (â€˜Vâ€™)</td>
</tr>
<tr>
<td>x57 - x62</td>
<td>ä¿ç•™</td>
</tr>
<tr>
<td>x62</td>
<td>8-bitäºŒè¿›åˆ¶æ•°æ®ï¼Œéæœ«å°¾chunk (â€˜bâ€™)</td>
</tr>
<tr>
<td>x63</td>
<td>ä¿ç•™ (â€˜câ€™ call for RPC)</td>
</tr>
<tr>
<td>x64</td>
<td>UTC time encoded as 64-bit long milliseconds since epoch (â€˜dâ€™)</td>
</tr>
<tr>
<td>x65</td>
<td>ä¿ç•™</td>
</tr>
<tr>
<td>x66</td>
<td>ä¿ç•™(â€˜fâ€™ for fault for RPC)</td>
</tr>
<tr>
<td>x67</td>
<td>double 0.0</td>
</tr>
<tr>
<td>x68</td>
<td>double 1.0</td>
</tr>
<tr>
<td>x69</td>
<td>double represented as byte (-128.0 to 127.0)</td>
</tr>
<tr>
<td>x6a</td>
<td>double represented as short (-32768.0 to 327676.0)</td>
</tr>
<tr>
<td>x6b</td>
<td>double represented as float</td>
</tr>
<tr>
<td>x6c</td>
<td>list/vector length (â€˜lâ€™)</td>
</tr>
<tr>
<td>x6d</td>
<td>ä¿ç•™ (â€˜mâ€™ method for RPC call)</td>
</tr>
<tr>
<td>x6e</td>
<td>list/vector compact length</td>
</tr>
<tr>
<td>x6f</td>
<td>å¯¹è±¡å®ä¾‹(â€˜oâ€™)</td>
</tr>
<tr>
<td>x70</td>
<td>ä¿ç•™ (â€˜pâ€™ - message/post)</td>
</tr>
<tr>
<td>x71</td>
<td>ä¿ç•™</td>
</tr>
<tr>
<td>x72</td>
<td>ä¿ç•™(â€˜râ€™ reply for message/RPC)</td>
</tr>
<tr>
<td>x73</td>
<td>utf-8å­—ç¬¦ä¸²ï¼Œéæœ«å°¾chunk (â€˜sâ€™)</td>
</tr>
<tr>
<td>x74</td>
<td>map/list type (â€˜tâ€™)</td>
</tr>
<tr>
<td>x75</td>
<td>type-ref</td>
</tr>
<tr>
<td>x76</td>
<td>å‹ç¼©æ ¼å¼çš„vector (â€˜vâ€™)</td>
</tr>
<tr>
<td>x77</td>
<td>ä»¥32-bitæ•´å‹ç¼–ç çš„long</td>
</tr>
<tr>
<td>x78 - x79</td>
<td>ä¿ç•™</td>
</tr>
<tr>
<td>x7a</td>
<td>list/map ç»ˆæ­¢ç¬¦(â€˜zâ€™)</td>
</tr>
<tr>
<td>x7b - x7f</td>
<td>ä¿ç•™</td>
</tr>
<tr>
<td>x80 - xbf</td>
<td>å•å­—èŠ‚å‹ç¼©æ ¼å¼çš„æ•´å‹int(-x10 to x3f, x90 is 0)</td>
</tr>
<tr>
<td>xc0 - xcf</td>
<td>åŒå­—èŠ‚å‹ç¼©æ ¼å¼çš„æ•´å‹int(-x800 to x3ff)</td>
</tr>
<tr>
<td>xd0 - xd7</td>
<td>ä¸‰å­—èŠ‚å‹ç¼©æ ¼å¼çš„æ•´å‹int(-x40000 to x3ffff)</td>
</tr>
<tr>
<td>xd8 - xef</td>
<td>å•å­—èŠ‚å‹ç¼©æ ¼å¼çš„é•¿æ•´å‹long(-x8 to x10, xe0 is 0)</td>
</tr>
<tr>
<td>xf0 - xff</td>
<td>åŒå­—èŠ‚å‹ç¼©æ ¼å¼çš„é•¿æ•´å‹long (-x800 to x3ff, xf8 is 0)</td>
</tr>
</tbody>
</table>
<h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2>
        
      
    </div>

    

    

  </article>

    
  </section>

  
  <nav class="pagination">
    
      <a class="prev" href="/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text">ä¸Šä¸€é¡µ</span>
      </a>
    
    
  </nav>


          </div>
          

        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:canyoutle@gmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/cytle" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://hexo.io/">Hexo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2017

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">ç‚’é¥­</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  


    <script type="text/javascript" src="/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.6.0"></script>

  </body>
</html>
